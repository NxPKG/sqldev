
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="SQLDev, SQL databases in Python, designed for simplicity, compatibility, and robustness.">
      
      
      
        <link rel="canonical" href="https://sqldev.khulnasoft.com/tutorial/automatic-id-none-refresh/">
      
      
        <link rel="prev" href="../insert/">
      
      
        <link rel="next" href="../select/">
      
      
      <link rel="icon" href="../../img/favicon.png">
      <meta name="generator" content="mkdocs-1.6.0, mkdocs-material-9.5.27">
    
    
      
        <title>Automatic IDs, None Defaults, and Refreshing Data - SQLDev</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.6543a935.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../css/termynal.css">
    
      <link rel="stylesheet" href="../../css/custom.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  

<script id="__analytics">function __md_analytics(){function n(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],n("js",new Date),n("config","G-J8HVTT936W"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){this.value&&n("event","search",{search_term:this.value})}),document$.subscribe(function(){var a=document.forms.feedback;if(void 0!==a)for(var e of a.querySelectorAll("[type=submit]"))e.addEventListener("click",function(e){e.preventDefault();var t=document.location.pathname,e=this.getAttribute("data-md-value");n("event","feedback",{page:t,data:e}),a.firstElementChild.disabled=!0;e=a.querySelector(".md-feedback__note [data-md-value='"+e+"']");e&&(e.hidden=!1)}),a.hidden=!1}),location$.subscribe(function(e){n("config","G-J8HVTT936W",{page_path:e.pathname})})});var e=document.createElement("script");e.async=!0,e.src="https://www.googletagmanager.com/gtag/js?id=G-J8HVTT936W",document.getElementById("__analytics").insertAdjacentElement("afterEnd",e)}</script>
  
    <script>"undefined"!=typeof __md_analytics&&__md_analytics()</script>
  

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="deep-purple" data-md-color-accent="amber">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#automatic-ids-none-defaults-and-refreshing-data" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="SQLDev" class="md-header__button md-logo" aria-label="SQLDev" data-md-component="logo">
      
  <img src="../../img/icon-white.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            SQLDev
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Automatic IDs, None Defaults, and Refreshing Data
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="deep-purple" data-md-color-accent="amber"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 0-7 7c0 2.38 1.19 4.47 3 5.74V17a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1v-2.26c1.81-1.27 3-3.36 3-5.74a7 7 0 0 0-7-7M9 21a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1v-1H9v1Z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="deep-purple" data-md-color-accent="amber"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 1 7 7c0 2.38-1.19 4.47-3 5.74V17a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1v-2.26C6.19 13.47 5 11.38 5 9a7 7 0 0 1 7-7M9 21v-1h6v1a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1m3-17a5 5 0 0 0-5 5c0 2.05 1.23 3.81 3 4.58V16h4v-2.42c1.77-.77 3-2.53 3-4.58a5 5 0 0 0-5-5Z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/khulnasoft/sqldev" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 480 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1zM480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2zm-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3zm-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1z"/></svg>
  </div>
  <div class="md-source__repository">
    khulnasoft/sqldev
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="SQLDev" class="md-nav__button md-logo" aria-label="SQLDev" data-md-component="logo">
      
  <img src="../../img/icon-white.svg" alt="logo">

    </a>
    SQLDev
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/khulnasoft/sqldev" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 480 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1zM480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2zm-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3zm-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1z"/></svg>
  </div>
  <div class="md-source__repository">
    khulnasoft/sqldev
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    SQLDev
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../features/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Features
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../databases/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Intro to Databases
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../db-to-code/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Database to Code (ORMs)
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" checked>
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Tutorial - User Guide
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_5" id="__nav_5_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Tutorial - User Guide
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../create-db-and-table-with-db-browser/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Create a Table with SQL
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../create-db-and-table/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Create a Table with SQLDev - Use the Engine
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../insert/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Create Rows - Use the Session - INSERT
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Automatic IDs, None Defaults, and Refreshing Data
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Automatic IDs, None Defaults, and Refreshing Data
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#create-a-new-hero-instance" class="md-nav__link">
    <span class="md-ellipsis">
      Create a New Hero Instance
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Create a New Hero Instance">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#how-optional-helps" class="md-nav__link">
    <span class="md-ellipsis">
      How Optional Helps
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#print-the-default-id-values" class="md-nav__link">
    <span class="md-ellipsis">
      Print the Default id Values
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#add-the-objects-to-the-session" class="md-nav__link">
    <span class="md-ellipsis">
      Add the Objects to the Session
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#commit-the-changes-to-the-database" class="md-nav__link">
    <span class="md-ellipsis">
      Commit the Changes to the Database
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#print-a-single-field" class="md-nav__link">
    <span class="md-ellipsis">
      Print a Single Field
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#refresh-objects-explicitly" class="md-nav__link">
    <span class="md-ellipsis">
      Refresh Objects Explicitly
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#print-data-after-closing-the-session" class="md-nav__link">
    <span class="md-ellipsis">
      Print Data After Closing the Session
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#review-all-the-code" class="md-nav__link">
    <span class="md-ellipsis">
      Review All the Code
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#recap" class="md-nav__link">
    <span class="md-ellipsis">
      Recap
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../select/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Read Data - SELECT
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../where/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Filter Data - WHERE
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../indexes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Indexes - Optimize Queries
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../one/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Read One Row
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../limit-and-offset/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Read a Range of Data - LIMIT and OFFSET
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../update/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Update Data - UPDATE
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../delete/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Delete Data - DELETE
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_13" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../connect/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Connect Tables - JOIN
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_5_13" id="__nav_5_13_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_13_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_13">
            <span class="md-nav__icon md-icon"></span>
            Connect Tables - JOIN
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../connect/create-connected-tables/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Create Connected Tables
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../connect/create-connected-rows/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Create and Connect Rows
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../connect/read-connected-data/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Read Connected Data
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../connect/update-data-connections/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Update Data Connections
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../connect/remove-data-connections/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Remove Data Connections
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_14" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../relationship-attributes/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Relationship Attributes
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_5_14" id="__nav_5_14_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_14_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_14">
            <span class="md-nav__icon md-icon"></span>
            Relationship Attributes
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../relationship-attributes/define-relationships-attributes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Define Relationships Attributes
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../relationship-attributes/create-and-update-relationships/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Create and Update Relationships
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../relationship-attributes/read-relationships/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Read Relationships
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../relationship-attributes/remove-relationships/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Remove Relationships
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../relationship-attributes/back-populates/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Relationship back_populates
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../relationship-attributes/type-annotation-strings/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Type annotation strings
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_15" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../many-to-many/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Many to Many
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_5_15" id="__nav_5_15_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_15_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_15">
            <span class="md-nav__icon md-icon"></span>
            Many to Many
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../many-to-many/create-models-with-link/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Create Models with a Many-to-Many Link
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../many-to-many/create-data/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Create Data with Many-to-Many Relationships
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../many-to-many/update-remove-relationships/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Update and Remove Many-to-Many Relationships
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../many-to-many/link-with-extra-fields/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Link Model with Extra Fields
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../code-structure/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Code Structure and Multiple Files
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_17" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../readyapi/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    ReadyAPI and Pydantic
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_5_17" id="__nav_5_17_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_17_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_17">
            <span class="md-nav__icon md-icon"></span>
            ReadyAPI and Pydantic
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../readyapi/simple-hero-api/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Simple Hero API with ReadyAPI
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../readyapi/response-model/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ReadyAPI Response Model with SQLDev
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../readyapi/multiple-models/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Multiple Models with ReadyAPI
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../readyapi/read-one/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Read One Model with ReadyAPI
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../readyapi/limit-and-offset/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Read Heroes with Limit and Offset with ReadyAPI
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../readyapi/update/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Update Data with ReadyAPI
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../readyapi/update-extra-data/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Update with Extra Data (Hashed Passwords) with ReadyAPI
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../readyapi/delete/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Delete Data with ReadyAPI
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../readyapi/session-with-dependency/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Session with ReadyAPI Dependency
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../readyapi/teams/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ReadyAPI Path Operations for Teams - Other Models
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../readyapi/relationships/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Models with Relationships in ReadyAPI
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../readyapi/tests/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Test Applications with ReadyAPI and SQLDev
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../advanced/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Advanced User Guide
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6" id="__nav_6_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Advanced User Guide
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../advanced/decimal/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Decimal Numbers
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../alternatives/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Alternatives, Inspiration and Comparisons
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../help/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Help SQLDev - Get Help
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../contributing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Contributing
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../release-notes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Release Notes
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#create-a-new-hero-instance" class="md-nav__link">
    <span class="md-ellipsis">
      Create a New Hero Instance
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Create a New Hero Instance">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#how-optional-helps" class="md-nav__link">
    <span class="md-ellipsis">
      How Optional Helps
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#print-the-default-id-values" class="md-nav__link">
    <span class="md-ellipsis">
      Print the Default id Values
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#add-the-objects-to-the-session" class="md-nav__link">
    <span class="md-ellipsis">
      Add the Objects to the Session
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#commit-the-changes-to-the-database" class="md-nav__link">
    <span class="md-ellipsis">
      Commit the Changes to the Database
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#print-a-single-field" class="md-nav__link">
    <span class="md-ellipsis">
      Print a Single Field
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#refresh-objects-explicitly" class="md-nav__link">
    <span class="md-ellipsis">
      Refresh Objects Explicitly
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#print-data-after-closing-the-session" class="md-nav__link">
    <span class="md-ellipsis">
      Print Data After Closing the Session
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#review-all-the-code" class="md-nav__link">
    <span class="md-ellipsis">
      Review All the Code
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#recap" class="md-nav__link">
    <span class="md-ellipsis">
      Recap
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="automatic-ids-none-defaults-and-refreshing-data">Automatic IDs, None Defaults, and Refreshing Data<a class="headerlink" href="#automatic-ids-none-defaults-and-refreshing-data" title="Permanent link">&para;</a></h1>
<p>In the previous chapter, we saw how to add rows to the database using <strong>SQLDev</strong>.</p>
<p>Now let's talk a bit about why the <code>id</code> field <strong>can't be <code>NULL</code></strong> on the database because it's a <strong>primary key</strong>, and we declare it using <code>Field(primary_key=True)</code>.</p>
<p>But the same <code>id</code> field actually <strong>can be <code>None</code></strong> in the Python code, so we declare the type with <code>Optional[int]</code>, and set the default value to <code>Field(default=None)</code>:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="1:2"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio" /><input id="__tabbed_1_2" name="__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="__tabbed_1_1">Python 3.10+</label><label for="__tabbed_1_2">Python 3.7+</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="c1"># Code above omitted 👆</span>

<span class="k">class</span> <span class="nc">Hero</span><span class="p">(</span><span class="n">SQLDev</span><span class="p">,</span> <span class="n">table</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<span class="hll">    <span class="nb">id</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span>    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">secret_name</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">age</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>

<span class="c1"># Code below omitted 👇</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="c1"># Code above omitted 👆</span>

<span class="k">class</span> <span class="nc">Hero</span><span class="p">(</span><span class="n">SQLDev</span><span class="p">,</span> <span class="n">table</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<span class="hll">    <span class="nb">id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span>    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">secret_name</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">age</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>

<span class="c1"># Code below omitted 👇</span>
</code></pre></div>
</div>
</div>
</div>
<details>
<summary>👀 Full file preview</summary>
<div class="tabbed-set tabbed-alternate" data-tabs="2:2"><input checked="checked" id="__tabbed_2_1" name="__tabbed_2" type="radio" /><input id="__tabbed_2_2" name="__tabbed_2" type="radio" /><div class="tabbed-labels"><label for="__tabbed_2_1">Python 3.10+</label><label for="__tabbed_2_2">Python 3.7+</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">sqldev</span> <span class="kn">import</span> <span class="n">Field</span><span class="p">,</span> <span class="n">Session</span><span class="p">,</span> <span class="n">SQLDev</span><span class="p">,</span> <span class="n">create_engine</span>


<span class="k">class</span> <span class="nc">Hero</span><span class="p">(</span><span class="n">SQLDev</span><span class="p">,</span> <span class="n">table</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="nb">id</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">secret_name</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">age</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>


<span class="n">sqlite_file_name</span> <span class="o">=</span> <span class="s2">&quot;database.db&quot;</span>
<span class="n">sqlite_url</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;sqlite:///</span><span class="si">{</span><span class="n">sqlite_file_name</span><span class="si">}</span><span class="s2">&quot;</span>

<span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="n">sqlite_url</span><span class="p">,</span> <span class="n">echo</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">create_db_and_tables</span><span class="p">():</span>
    <span class="n">SQLDev</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">create_all</span><span class="p">(</span><span class="n">engine</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">create_heroes</span><span class="p">():</span>
    <span class="n">hero_1</span> <span class="o">=</span> <span class="n">Hero</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Deadpond&quot;</span><span class="p">,</span> <span class="n">secret_name</span><span class="o">=</span><span class="s2">&quot;Nx Pkg&quot;</span><span class="p">)</span>
    <span class="n">hero_2</span> <span class="o">=</span> <span class="n">Hero</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Spider-Boy&quot;</span><span class="p">,</span> <span class="n">secret_name</span><span class="o">=</span><span class="s2">&quot;Pedro Parqueador&quot;</span><span class="p">)</span>
    <span class="n">hero_3</span> <span class="o">=</span> <span class="n">Hero</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Rusty-Man&quot;</span><span class="p">,</span> <span class="n">secret_name</span><span class="o">=</span><span class="s2">&quot;Tommy Sharp&quot;</span><span class="p">,</span> <span class="n">age</span><span class="o">=</span><span class="mi">48</span><span class="p">)</span>

    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Before interacting with the database&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="p">)</span>

    <span class="k">with</span> <span class="n">Session</span><span class="p">(</span><span class="n">engine</span><span class="p">)</span> <span class="k">as</span> <span class="n">session</span><span class="p">:</span>
        <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">hero_1</span><span class="p">)</span>
        <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">hero_2</span><span class="p">)</span>
        <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">hero_3</span><span class="p">)</span>

        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;After adding to the session&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="p">)</span>

        <span class="n">session</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>

        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;After committing the session&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="p">)</span>

        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;After committing the session, show IDs&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1 ID:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2 ID:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3 ID:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>

        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;After committing the session, show names&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1 name:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2 name:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3 name:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>

        <span class="n">session</span><span class="o">.</span><span class="n">refresh</span><span class="p">(</span><span class="n">hero_1</span><span class="p">)</span>
        <span class="n">session</span><span class="o">.</span><span class="n">refresh</span><span class="p">(</span><span class="n">hero_2</span><span class="p">)</span>
        <span class="n">session</span><span class="o">.</span><span class="n">refresh</span><span class="p">(</span><span class="n">hero_3</span><span class="p">)</span>

        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;After refreshing the heroes&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="p">)</span>

    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;After the session closes&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">create_db_and_tables</span><span class="p">()</span>
    <span class="n">create_heroes</span><span class="p">()</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Optional</span>

<span class="kn">from</span> <span class="nn">sqldev</span> <span class="kn">import</span> <span class="n">Field</span><span class="p">,</span> <span class="n">Session</span><span class="p">,</span> <span class="n">SQLDev</span><span class="p">,</span> <span class="n">create_engine</span>


<span class="k">class</span> <span class="nc">Hero</span><span class="p">(</span><span class="n">SQLDev</span><span class="p">,</span> <span class="n">table</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="nb">id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">secret_name</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">age</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>


<span class="n">sqlite_file_name</span> <span class="o">=</span> <span class="s2">&quot;database.db&quot;</span>
<span class="n">sqlite_url</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;sqlite:///</span><span class="si">{</span><span class="n">sqlite_file_name</span><span class="si">}</span><span class="s2">&quot;</span>

<span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="n">sqlite_url</span><span class="p">,</span> <span class="n">echo</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">create_db_and_tables</span><span class="p">():</span>
    <span class="n">SQLDev</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">create_all</span><span class="p">(</span><span class="n">engine</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">create_heroes</span><span class="p">():</span>
    <span class="n">hero_1</span> <span class="o">=</span> <span class="n">Hero</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Deadpond&quot;</span><span class="p">,</span> <span class="n">secret_name</span><span class="o">=</span><span class="s2">&quot;Nx Pkg&quot;</span><span class="p">)</span>
    <span class="n">hero_2</span> <span class="o">=</span> <span class="n">Hero</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Spider-Boy&quot;</span><span class="p">,</span> <span class="n">secret_name</span><span class="o">=</span><span class="s2">&quot;Pedro Parqueador&quot;</span><span class="p">)</span>
    <span class="n">hero_3</span> <span class="o">=</span> <span class="n">Hero</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Rusty-Man&quot;</span><span class="p">,</span> <span class="n">secret_name</span><span class="o">=</span><span class="s2">&quot;Tommy Sharp&quot;</span><span class="p">,</span> <span class="n">age</span><span class="o">=</span><span class="mi">48</span><span class="p">)</span>

    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Before interacting with the database&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="p">)</span>

    <span class="k">with</span> <span class="n">Session</span><span class="p">(</span><span class="n">engine</span><span class="p">)</span> <span class="k">as</span> <span class="n">session</span><span class="p">:</span>
        <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">hero_1</span><span class="p">)</span>
        <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">hero_2</span><span class="p">)</span>
        <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">hero_3</span><span class="p">)</span>

        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;After adding to the session&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="p">)</span>

        <span class="n">session</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>

        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;After committing the session&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="p">)</span>

        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;After committing the session, show IDs&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1 ID:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2 ID:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3 ID:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>

        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;After committing the session, show names&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1 name:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2 name:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3 name:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>

        <span class="n">session</span><span class="o">.</span><span class="n">refresh</span><span class="p">(</span><span class="n">hero_1</span><span class="p">)</span>
        <span class="n">session</span><span class="o">.</span><span class="n">refresh</span><span class="p">(</span><span class="n">hero_2</span><span class="p">)</span>
        <span class="n">session</span><span class="o">.</span><span class="n">refresh</span><span class="p">(</span><span class="n">hero_3</span><span class="p">)</span>

        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;After refreshing the heroes&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="p">)</span>

    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;After the session closes&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">create_db_and_tables</span><span class="p">()</span>
    <span class="n">create_heroes</span><span class="p">()</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</code></pre></div>
</div>
</div>
</div>
</details>
<p>Next, I'll show you a bit more about the synchronization of data between the database and the Python code.</p>
<p>When do we get an actual <code>int</code> from the database in that <code>id</code> field? Let's see all that. 👇</p>
<h2 id="create-a-new-hero-instance">Create a New <code>Hero</code> Instance<a class="headerlink" href="#create-a-new-hero-instance" title="Permanent link">&para;</a></h2>
<p>When we create a new <code>Hero</code> instance, we don't set the <code>id</code>:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="3:2"><input checked="checked" id="__tabbed_3_1" name="__tabbed_3" type="radio" /><input id="__tabbed_3_2" name="__tabbed_3" type="radio" /><div class="tabbed-labels"><label for="__tabbed_3_1">Python 3.10+</label><label for="__tabbed_3_2">Python 3.7+</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="c1"># Code above omitted 👆</span>

<span class="hll"><span class="k">def</span> <span class="nf">create_heroes</span><span class="p">():</span>
</span><span class="hll">    <span class="n">hero_1</span> <span class="o">=</span> <span class="n">Hero</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Deadpond&quot;</span><span class="p">,</span> <span class="n">secret_name</span><span class="o">=</span><span class="s2">&quot;Nx Pkg&quot;</span><span class="p">)</span>
</span><span class="hll">    <span class="n">hero_2</span> <span class="o">=</span> <span class="n">Hero</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Spider-Boy&quot;</span><span class="p">,</span> <span class="n">secret_name</span><span class="o">=</span><span class="s2">&quot;Pedro Parqueador&quot;</span><span class="p">)</span>
</span><span class="hll">    <span class="n">hero_3</span> <span class="o">=</span> <span class="n">Hero</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Rusty-Man&quot;</span><span class="p">,</span> <span class="n">secret_name</span><span class="o">=</span><span class="s2">&quot;Tommy Sharp&quot;</span><span class="p">,</span> <span class="n">age</span><span class="o">=</span><span class="mi">48</span><span class="p">)</span>
</span>
<span class="c1"># Code below omitted 👇</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="c1"># Code above omitted 👆</span>

<span class="hll"><span class="k">def</span> <span class="nf">create_heroes</span><span class="p">():</span>
</span><span class="hll">    <span class="n">hero_1</span> <span class="o">=</span> <span class="n">Hero</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Deadpond&quot;</span><span class="p">,</span> <span class="n">secret_name</span><span class="o">=</span><span class="s2">&quot;Nx Pkg&quot;</span><span class="p">)</span>
</span><span class="hll">    <span class="n">hero_2</span> <span class="o">=</span> <span class="n">Hero</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Spider-Boy&quot;</span><span class="p">,</span> <span class="n">secret_name</span><span class="o">=</span><span class="s2">&quot;Pedro Parqueador&quot;</span><span class="p">)</span>
</span><span class="hll">    <span class="n">hero_3</span> <span class="o">=</span> <span class="n">Hero</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Rusty-Man&quot;</span><span class="p">,</span> <span class="n">secret_name</span><span class="o">=</span><span class="s2">&quot;Tommy Sharp&quot;</span><span class="p">,</span> <span class="n">age</span><span class="o">=</span><span class="mi">48</span><span class="p">)</span>
</span>
<span class="c1"># Code below omitted 👇</span>
</code></pre></div>
</div>
</div>
</div>
<details>
<summary>👀 Full file preview</summary>
<div class="tabbed-set tabbed-alternate" data-tabs="4:2"><input checked="checked" id="__tabbed_4_1" name="__tabbed_4" type="radio" /><input id="__tabbed_4_2" name="__tabbed_4" type="radio" /><div class="tabbed-labels"><label for="__tabbed_4_1">Python 3.10+</label><label for="__tabbed_4_2">Python 3.7+</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">sqldev</span> <span class="kn">import</span> <span class="n">Field</span><span class="p">,</span> <span class="n">Session</span><span class="p">,</span> <span class="n">SQLDev</span><span class="p">,</span> <span class="n">create_engine</span>


<span class="k">class</span> <span class="nc">Hero</span><span class="p">(</span><span class="n">SQLDev</span><span class="p">,</span> <span class="n">table</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="nb">id</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">secret_name</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">age</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>


<span class="n">sqlite_file_name</span> <span class="o">=</span> <span class="s2">&quot;database.db&quot;</span>
<span class="n">sqlite_url</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;sqlite:///</span><span class="si">{</span><span class="n">sqlite_file_name</span><span class="si">}</span><span class="s2">&quot;</span>

<span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="n">sqlite_url</span><span class="p">,</span> <span class="n">echo</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">create_db_and_tables</span><span class="p">():</span>
    <span class="n">SQLDev</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">create_all</span><span class="p">(</span><span class="n">engine</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">create_heroes</span><span class="p">():</span>
    <span class="n">hero_1</span> <span class="o">=</span> <span class="n">Hero</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Deadpond&quot;</span><span class="p">,</span> <span class="n">secret_name</span><span class="o">=</span><span class="s2">&quot;Nx Pkg&quot;</span><span class="p">)</span>
    <span class="n">hero_2</span> <span class="o">=</span> <span class="n">Hero</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Spider-Boy&quot;</span><span class="p">,</span> <span class="n">secret_name</span><span class="o">=</span><span class="s2">&quot;Pedro Parqueador&quot;</span><span class="p">)</span>
    <span class="n">hero_3</span> <span class="o">=</span> <span class="n">Hero</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Rusty-Man&quot;</span><span class="p">,</span> <span class="n">secret_name</span><span class="o">=</span><span class="s2">&quot;Tommy Sharp&quot;</span><span class="p">,</span> <span class="n">age</span><span class="o">=</span><span class="mi">48</span><span class="p">)</span>

    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Before interacting with the database&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="p">)</span>

    <span class="k">with</span> <span class="n">Session</span><span class="p">(</span><span class="n">engine</span><span class="p">)</span> <span class="k">as</span> <span class="n">session</span><span class="p">:</span>
        <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">hero_1</span><span class="p">)</span>
        <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">hero_2</span><span class="p">)</span>
        <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">hero_3</span><span class="p">)</span>

        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;After adding to the session&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="p">)</span>

        <span class="n">session</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>

        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;After committing the session&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="p">)</span>

        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;After committing the session, show IDs&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1 ID:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2 ID:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3 ID:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>

        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;After committing the session, show names&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1 name:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2 name:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3 name:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>

        <span class="n">session</span><span class="o">.</span><span class="n">refresh</span><span class="p">(</span><span class="n">hero_1</span><span class="p">)</span>
        <span class="n">session</span><span class="o">.</span><span class="n">refresh</span><span class="p">(</span><span class="n">hero_2</span><span class="p">)</span>
        <span class="n">session</span><span class="o">.</span><span class="n">refresh</span><span class="p">(</span><span class="n">hero_3</span><span class="p">)</span>

        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;After refreshing the heroes&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="p">)</span>

    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;After the session closes&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">create_db_and_tables</span><span class="p">()</span>
    <span class="n">create_heroes</span><span class="p">()</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Optional</span>

<span class="kn">from</span> <span class="nn">sqldev</span> <span class="kn">import</span> <span class="n">Field</span><span class="p">,</span> <span class="n">Session</span><span class="p">,</span> <span class="n">SQLDev</span><span class="p">,</span> <span class="n">create_engine</span>


<span class="k">class</span> <span class="nc">Hero</span><span class="p">(</span><span class="n">SQLDev</span><span class="p">,</span> <span class="n">table</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="nb">id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">secret_name</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">age</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>


<span class="n">sqlite_file_name</span> <span class="o">=</span> <span class="s2">&quot;database.db&quot;</span>
<span class="n">sqlite_url</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;sqlite:///</span><span class="si">{</span><span class="n">sqlite_file_name</span><span class="si">}</span><span class="s2">&quot;</span>

<span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="n">sqlite_url</span><span class="p">,</span> <span class="n">echo</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">create_db_and_tables</span><span class="p">():</span>
    <span class="n">SQLDev</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">create_all</span><span class="p">(</span><span class="n">engine</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">create_heroes</span><span class="p">():</span>
    <span class="n">hero_1</span> <span class="o">=</span> <span class="n">Hero</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Deadpond&quot;</span><span class="p">,</span> <span class="n">secret_name</span><span class="o">=</span><span class="s2">&quot;Nx Pkg&quot;</span><span class="p">)</span>
    <span class="n">hero_2</span> <span class="o">=</span> <span class="n">Hero</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Spider-Boy&quot;</span><span class="p">,</span> <span class="n">secret_name</span><span class="o">=</span><span class="s2">&quot;Pedro Parqueador&quot;</span><span class="p">)</span>
    <span class="n">hero_3</span> <span class="o">=</span> <span class="n">Hero</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Rusty-Man&quot;</span><span class="p">,</span> <span class="n">secret_name</span><span class="o">=</span><span class="s2">&quot;Tommy Sharp&quot;</span><span class="p">,</span> <span class="n">age</span><span class="o">=</span><span class="mi">48</span><span class="p">)</span>

    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Before interacting with the database&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="p">)</span>

    <span class="k">with</span> <span class="n">Session</span><span class="p">(</span><span class="n">engine</span><span class="p">)</span> <span class="k">as</span> <span class="n">session</span><span class="p">:</span>
        <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">hero_1</span><span class="p">)</span>
        <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">hero_2</span><span class="p">)</span>
        <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">hero_3</span><span class="p">)</span>

        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;After adding to the session&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="p">)</span>

        <span class="n">session</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>

        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;After committing the session&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="p">)</span>

        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;After committing the session, show IDs&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1 ID:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2 ID:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3 ID:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>

        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;After committing the session, show names&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1 name:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2 name:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3 name:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>

        <span class="n">session</span><span class="o">.</span><span class="n">refresh</span><span class="p">(</span><span class="n">hero_1</span><span class="p">)</span>
        <span class="n">session</span><span class="o">.</span><span class="n">refresh</span><span class="p">(</span><span class="n">hero_2</span><span class="p">)</span>
        <span class="n">session</span><span class="o">.</span><span class="n">refresh</span><span class="p">(</span><span class="n">hero_3</span><span class="p">)</span>

        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;After refreshing the heroes&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="p">)</span>

    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;After the session closes&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">create_db_and_tables</span><span class="p">()</span>
    <span class="n">create_heroes</span><span class="p">()</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</code></pre></div>
</div>
</div>
</div>
</details>
<h3 id="how-optional-helps">How <code>Optional</code> Helps<a class="headerlink" href="#how-optional-helps" title="Permanent link">&para;</a></h3>
<p>Because we don't set the <code>id</code>, it takes the Python's default value of <code>None</code> that we set in <code>Field(default=None)</code>.</p>
<p>This is the only reason why we define it with <code>Optional</code> and with a default value of <code>None</code>.</p>
<p>Because at this point in the code, <strong>before interacting with the database</strong>, the Python value could actually be <code>None</code>.</p>
<p>If we assumed that the <code>id</code> was <em>always</em> an <code>int</code> and added the type annotation without <code>Optional</code>, we could end up writing broken code, like:</p>
<div class="highlight"><pre><span></span><code><span class="n">next_hero_id</span> <span class="o">=</span> <span class="n">hero_1</span><span class="o">.</span><span class="n">id</span> <span class="o">+</span> <span class="mi">1</span>
</code></pre></div>
<p>If we ran this code before saving the hero to the database and the <code>hero_1.id</code> was still <code>None</code>, we would get an error like:</p>
<div class="highlight"><pre><span></span><code>TypeError: unsupported operand type(s) for +: &#39;NoneType&#39; and &#39;int&#39;
</code></pre></div>
<p>But by declaring it with <code>Optional[int]</code>, the editor will help us to avoid writing broken code by showing us a warning telling us that the code could be invalid if <code>hero_1.id</code> is <code>None</code>. 🔍</p>
<h2 id="print-the-default-id-values">Print the Default <code>id</code> Values<a class="headerlink" href="#print-the-default-id-values" title="Permanent link">&para;</a></h2>
<p>We can confirm that by printing our heroes before adding them to the database:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="5:2"><input checked="checked" id="__tabbed_5_1" name="__tabbed_5" type="radio" /><input id="__tabbed_5_2" name="__tabbed_5" type="radio" /><div class="tabbed-labels"><label for="__tabbed_5_1">Python 3.10+</label><label for="__tabbed_5_2">Python 3.7+</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="c1"># Code above omitted 👆</span>

<span class="k">def</span> <span class="nf">create_heroes</span><span class="p">():</span>
    <span class="n">hero_1</span> <span class="o">=</span> <span class="n">Hero</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Deadpond&quot;</span><span class="p">,</span> <span class="n">secret_name</span><span class="o">=</span><span class="s2">&quot;Nx Pkg&quot;</span><span class="p">)</span>
    <span class="n">hero_2</span> <span class="o">=</span> <span class="n">Hero</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Spider-Boy&quot;</span><span class="p">,</span> <span class="n">secret_name</span><span class="o">=</span><span class="s2">&quot;Pedro Parqueador&quot;</span><span class="p">)</span>
    <span class="n">hero_3</span> <span class="o">=</span> <span class="n">Hero</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Rusty-Man&quot;</span><span class="p">,</span> <span class="n">secret_name</span><span class="o">=</span><span class="s2">&quot;Tommy Sharp&quot;</span><span class="p">,</span> <span class="n">age</span><span class="o">=</span><span class="mi">48</span><span class="p">)</span>

    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Before interacting with the database&quot;</span><span class="p">)</span>
<span class="hll">    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="p">)</span>
</span><span class="hll">    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="p">)</span>
</span><span class="hll">    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="p">)</span>
</span>
<span class="c1"># Code below omitted 👇</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="c1"># Code above omitted 👆</span>

<span class="k">def</span> <span class="nf">create_heroes</span><span class="p">():</span>
    <span class="n">hero_1</span> <span class="o">=</span> <span class="n">Hero</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Deadpond&quot;</span><span class="p">,</span> <span class="n">secret_name</span><span class="o">=</span><span class="s2">&quot;Nx Pkg&quot;</span><span class="p">)</span>
    <span class="n">hero_2</span> <span class="o">=</span> <span class="n">Hero</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Spider-Boy&quot;</span><span class="p">,</span> <span class="n">secret_name</span><span class="o">=</span><span class="s2">&quot;Pedro Parqueador&quot;</span><span class="p">)</span>
    <span class="n">hero_3</span> <span class="o">=</span> <span class="n">Hero</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Rusty-Man&quot;</span><span class="p">,</span> <span class="n">secret_name</span><span class="o">=</span><span class="s2">&quot;Tommy Sharp&quot;</span><span class="p">,</span> <span class="n">age</span><span class="o">=</span><span class="mi">48</span><span class="p">)</span>

    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Before interacting with the database&quot;</span><span class="p">)</span>
<span class="hll">    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="p">)</span>
</span><span class="hll">    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="p">)</span>
</span><span class="hll">    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="p">)</span>
</span>
<span class="c1"># Code below omitted 👇</span>
</code></pre></div>
</div>
</div>
</div>
<details>
<summary>👀 Full file preview</summary>
<div class="tabbed-set tabbed-alternate" data-tabs="6:2"><input checked="checked" id="__tabbed_6_1" name="__tabbed_6" type="radio" /><input id="__tabbed_6_2" name="__tabbed_6" type="radio" /><div class="tabbed-labels"><label for="__tabbed_6_1">Python 3.10+</label><label for="__tabbed_6_2">Python 3.7+</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">sqldev</span> <span class="kn">import</span> <span class="n">Field</span><span class="p">,</span> <span class="n">Session</span><span class="p">,</span> <span class="n">SQLDev</span><span class="p">,</span> <span class="n">create_engine</span>


<span class="k">class</span> <span class="nc">Hero</span><span class="p">(</span><span class="n">SQLDev</span><span class="p">,</span> <span class="n">table</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="nb">id</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">secret_name</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">age</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>


<span class="n">sqlite_file_name</span> <span class="o">=</span> <span class="s2">&quot;database.db&quot;</span>
<span class="n">sqlite_url</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;sqlite:///</span><span class="si">{</span><span class="n">sqlite_file_name</span><span class="si">}</span><span class="s2">&quot;</span>

<span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="n">sqlite_url</span><span class="p">,</span> <span class="n">echo</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">create_db_and_tables</span><span class="p">():</span>
    <span class="n">SQLDev</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">create_all</span><span class="p">(</span><span class="n">engine</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">create_heroes</span><span class="p">():</span>
    <span class="n">hero_1</span> <span class="o">=</span> <span class="n">Hero</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Deadpond&quot;</span><span class="p">,</span> <span class="n">secret_name</span><span class="o">=</span><span class="s2">&quot;Nx Pkg&quot;</span><span class="p">)</span>
    <span class="n">hero_2</span> <span class="o">=</span> <span class="n">Hero</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Spider-Boy&quot;</span><span class="p">,</span> <span class="n">secret_name</span><span class="o">=</span><span class="s2">&quot;Pedro Parqueador&quot;</span><span class="p">)</span>
    <span class="n">hero_3</span> <span class="o">=</span> <span class="n">Hero</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Rusty-Man&quot;</span><span class="p">,</span> <span class="n">secret_name</span><span class="o">=</span><span class="s2">&quot;Tommy Sharp&quot;</span><span class="p">,</span> <span class="n">age</span><span class="o">=</span><span class="mi">48</span><span class="p">)</span>

    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Before interacting with the database&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="p">)</span>

    <span class="k">with</span> <span class="n">Session</span><span class="p">(</span><span class="n">engine</span><span class="p">)</span> <span class="k">as</span> <span class="n">session</span><span class="p">:</span>
        <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">hero_1</span><span class="p">)</span>
        <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">hero_2</span><span class="p">)</span>
        <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">hero_3</span><span class="p">)</span>

        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;After adding to the session&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="p">)</span>

        <span class="n">session</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>

        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;After committing the session&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="p">)</span>

        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;After committing the session, show IDs&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1 ID:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2 ID:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3 ID:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>

        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;After committing the session, show names&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1 name:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2 name:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3 name:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>

        <span class="n">session</span><span class="o">.</span><span class="n">refresh</span><span class="p">(</span><span class="n">hero_1</span><span class="p">)</span>
        <span class="n">session</span><span class="o">.</span><span class="n">refresh</span><span class="p">(</span><span class="n">hero_2</span><span class="p">)</span>
        <span class="n">session</span><span class="o">.</span><span class="n">refresh</span><span class="p">(</span><span class="n">hero_3</span><span class="p">)</span>

        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;After refreshing the heroes&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="p">)</span>

    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;After the session closes&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">create_db_and_tables</span><span class="p">()</span>
    <span class="n">create_heroes</span><span class="p">()</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Optional</span>

<span class="kn">from</span> <span class="nn">sqldev</span> <span class="kn">import</span> <span class="n">Field</span><span class="p">,</span> <span class="n">Session</span><span class="p">,</span> <span class="n">SQLDev</span><span class="p">,</span> <span class="n">create_engine</span>


<span class="k">class</span> <span class="nc">Hero</span><span class="p">(</span><span class="n">SQLDev</span><span class="p">,</span> <span class="n">table</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="nb">id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">secret_name</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">age</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>


<span class="n">sqlite_file_name</span> <span class="o">=</span> <span class="s2">&quot;database.db&quot;</span>
<span class="n">sqlite_url</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;sqlite:///</span><span class="si">{</span><span class="n">sqlite_file_name</span><span class="si">}</span><span class="s2">&quot;</span>

<span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="n">sqlite_url</span><span class="p">,</span> <span class="n">echo</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">create_db_and_tables</span><span class="p">():</span>
    <span class="n">SQLDev</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">create_all</span><span class="p">(</span><span class="n">engine</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">create_heroes</span><span class="p">():</span>
    <span class="n">hero_1</span> <span class="o">=</span> <span class="n">Hero</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Deadpond&quot;</span><span class="p">,</span> <span class="n">secret_name</span><span class="o">=</span><span class="s2">&quot;Nx Pkg&quot;</span><span class="p">)</span>
    <span class="n">hero_2</span> <span class="o">=</span> <span class="n">Hero</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Spider-Boy&quot;</span><span class="p">,</span> <span class="n">secret_name</span><span class="o">=</span><span class="s2">&quot;Pedro Parqueador&quot;</span><span class="p">)</span>
    <span class="n">hero_3</span> <span class="o">=</span> <span class="n">Hero</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Rusty-Man&quot;</span><span class="p">,</span> <span class="n">secret_name</span><span class="o">=</span><span class="s2">&quot;Tommy Sharp&quot;</span><span class="p">,</span> <span class="n">age</span><span class="o">=</span><span class="mi">48</span><span class="p">)</span>

    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Before interacting with the database&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="p">)</span>

    <span class="k">with</span> <span class="n">Session</span><span class="p">(</span><span class="n">engine</span><span class="p">)</span> <span class="k">as</span> <span class="n">session</span><span class="p">:</span>
        <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">hero_1</span><span class="p">)</span>
        <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">hero_2</span><span class="p">)</span>
        <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">hero_3</span><span class="p">)</span>

        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;After adding to the session&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="p">)</span>

        <span class="n">session</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>

        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;After committing the session&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="p">)</span>

        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;After committing the session, show IDs&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1 ID:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2 ID:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3 ID:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>

        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;After committing the session, show names&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1 name:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2 name:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3 name:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>

        <span class="n">session</span><span class="o">.</span><span class="n">refresh</span><span class="p">(</span><span class="n">hero_1</span><span class="p">)</span>
        <span class="n">session</span><span class="o">.</span><span class="n">refresh</span><span class="p">(</span><span class="n">hero_2</span><span class="p">)</span>
        <span class="n">session</span><span class="o">.</span><span class="n">refresh</span><span class="p">(</span><span class="n">hero_3</span><span class="p">)</span>

        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;After refreshing the heroes&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="p">)</span>

    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;After the session closes&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">create_db_and_tables</span><span class="p">()</span>
    <span class="n">create_heroes</span><span class="p">()</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</code></pre></div>
</div>
</div>
</div>
</details>
<p>That will output:</p>
<div class="termy">

<div class="highlight"><pre><span></span><code><span class="gp">$ </span>python<span class="w"> </span>app.py

<span class="go">// Output above omitted 👆</span>

<span class="go">Before interacting with the database</span>
<span class="go">Hero 1: id=None name=&#39;Deadpond&#39; secret_name=&#39;Nx Pkg&#39; age=None</span>
<span class="go">Hero 2: id=None name=&#39;Spider-Boy&#39; secret_name=&#39;Pedro Parqueador&#39; age=None</span>
<span class="go">Hero 3: id=None name=&#39;Rusty-Man&#39; secret_name=&#39;Tommy Sharp&#39; age=48</span>
</code></pre></div>

</div>

<p>Notice they all have <code>id=None</code>.</p>
<p>That's the default value we defined in the <code>Hero</code> model class.</p>
<p>What happens when we <code>add</code> these objects to the <strong>session</strong>?</p>
<h2 id="add-the-objects-to-the-session">Add the Objects to the Session<a class="headerlink" href="#add-the-objects-to-the-session" title="Permanent link">&para;</a></h2>
<p>After we add the <code>Hero</code> instance objects to the <strong>session</strong>, the IDs are <em>still</em> <code>None</code>.</p>
<p>We can verify by creating a session using a <code>with</code> block and adding the objects. And then printing them again:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="7:2"><input checked="checked" id="__tabbed_7_1" name="__tabbed_7" type="radio" /><input id="__tabbed_7_2" name="__tabbed_7" type="radio" /><div class="tabbed-labels"><label for="__tabbed_7_1">Python 3.10+</label><label for="__tabbed_7_2">Python 3.7+</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="c1"># Code above omitted 👆</span>

<span class="k">def</span> <span class="nf">create_heroes</span><span class="p">():</span>
    <span class="n">hero_1</span> <span class="o">=</span> <span class="n">Hero</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Deadpond&quot;</span><span class="p">,</span> <span class="n">secret_name</span><span class="o">=</span><span class="s2">&quot;Nx Pkg&quot;</span><span class="p">)</span>
    <span class="n">hero_2</span> <span class="o">=</span> <span class="n">Hero</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Spider-Boy&quot;</span><span class="p">,</span> <span class="n">secret_name</span><span class="o">=</span><span class="s2">&quot;Pedro Parqueador&quot;</span><span class="p">)</span>
    <span class="n">hero_3</span> <span class="o">=</span> <span class="n">Hero</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Rusty-Man&quot;</span><span class="p">,</span> <span class="n">secret_name</span><span class="o">=</span><span class="s2">&quot;Tommy Sharp&quot;</span><span class="p">,</span> <span class="n">age</span><span class="o">=</span><span class="mi">48</span><span class="p">)</span>

    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Before interacting with the database&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="p">)</span>

    <span class="k">with</span> <span class="n">Session</span><span class="p">(</span><span class="n">engine</span><span class="p">)</span> <span class="k">as</span> <span class="n">session</span><span class="p">:</span>
        <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">hero_1</span><span class="p">)</span>
        <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">hero_2</span><span class="p">)</span>
        <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">hero_3</span><span class="p">)</span>

        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;After adding to the session&quot;</span><span class="p">)</span>
<span class="hll">        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="p">)</span>
</span><span class="hll">        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="p">)</span>
</span><span class="hll">        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="p">)</span>
</span>
<span class="c1"># Code below omitted 👇</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="c1"># Code above omitted 👆</span>

<span class="k">def</span> <span class="nf">create_heroes</span><span class="p">():</span>
    <span class="n">hero_1</span> <span class="o">=</span> <span class="n">Hero</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Deadpond&quot;</span><span class="p">,</span> <span class="n">secret_name</span><span class="o">=</span><span class="s2">&quot;Nx Pkg&quot;</span><span class="p">)</span>
    <span class="n">hero_2</span> <span class="o">=</span> <span class="n">Hero</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Spider-Boy&quot;</span><span class="p">,</span> <span class="n">secret_name</span><span class="o">=</span><span class="s2">&quot;Pedro Parqueador&quot;</span><span class="p">)</span>
    <span class="n">hero_3</span> <span class="o">=</span> <span class="n">Hero</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Rusty-Man&quot;</span><span class="p">,</span> <span class="n">secret_name</span><span class="o">=</span><span class="s2">&quot;Tommy Sharp&quot;</span><span class="p">,</span> <span class="n">age</span><span class="o">=</span><span class="mi">48</span><span class="p">)</span>

    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Before interacting with the database&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="p">)</span>

    <span class="k">with</span> <span class="n">Session</span><span class="p">(</span><span class="n">engine</span><span class="p">)</span> <span class="k">as</span> <span class="n">session</span><span class="p">:</span>
        <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">hero_1</span><span class="p">)</span>
        <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">hero_2</span><span class="p">)</span>
        <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">hero_3</span><span class="p">)</span>

        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;After adding to the session&quot;</span><span class="p">)</span>
<span class="hll">        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="p">)</span>
</span><span class="hll">        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="p">)</span>
</span><span class="hll">        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="p">)</span>
</span>
<span class="c1"># Code below omitted 👇</span>
</code></pre></div>
</div>
</div>
</div>
<details>
<summary>👀 Full file preview</summary>
<div class="tabbed-set tabbed-alternate" data-tabs="8:2"><input checked="checked" id="__tabbed_8_1" name="__tabbed_8" type="radio" /><input id="__tabbed_8_2" name="__tabbed_8" type="radio" /><div class="tabbed-labels"><label for="__tabbed_8_1">Python 3.10+</label><label for="__tabbed_8_2">Python 3.7+</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">sqldev</span> <span class="kn">import</span> <span class="n">Field</span><span class="p">,</span> <span class="n">Session</span><span class="p">,</span> <span class="n">SQLDev</span><span class="p">,</span> <span class="n">create_engine</span>


<span class="k">class</span> <span class="nc">Hero</span><span class="p">(</span><span class="n">SQLDev</span><span class="p">,</span> <span class="n">table</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="nb">id</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">secret_name</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">age</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>


<span class="n">sqlite_file_name</span> <span class="o">=</span> <span class="s2">&quot;database.db&quot;</span>
<span class="n">sqlite_url</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;sqlite:///</span><span class="si">{</span><span class="n">sqlite_file_name</span><span class="si">}</span><span class="s2">&quot;</span>

<span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="n">sqlite_url</span><span class="p">,</span> <span class="n">echo</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">create_db_and_tables</span><span class="p">():</span>
    <span class="n">SQLDev</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">create_all</span><span class="p">(</span><span class="n">engine</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">create_heroes</span><span class="p">():</span>
    <span class="n">hero_1</span> <span class="o">=</span> <span class="n">Hero</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Deadpond&quot;</span><span class="p">,</span> <span class="n">secret_name</span><span class="o">=</span><span class="s2">&quot;Nx Pkg&quot;</span><span class="p">)</span>
    <span class="n">hero_2</span> <span class="o">=</span> <span class="n">Hero</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Spider-Boy&quot;</span><span class="p">,</span> <span class="n">secret_name</span><span class="o">=</span><span class="s2">&quot;Pedro Parqueador&quot;</span><span class="p">)</span>
    <span class="n">hero_3</span> <span class="o">=</span> <span class="n">Hero</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Rusty-Man&quot;</span><span class="p">,</span> <span class="n">secret_name</span><span class="o">=</span><span class="s2">&quot;Tommy Sharp&quot;</span><span class="p">,</span> <span class="n">age</span><span class="o">=</span><span class="mi">48</span><span class="p">)</span>

    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Before interacting with the database&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="p">)</span>

    <span class="k">with</span> <span class="n">Session</span><span class="p">(</span><span class="n">engine</span><span class="p">)</span> <span class="k">as</span> <span class="n">session</span><span class="p">:</span>
        <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">hero_1</span><span class="p">)</span>
        <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">hero_2</span><span class="p">)</span>
        <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">hero_3</span><span class="p">)</span>

        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;After adding to the session&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="p">)</span>

        <span class="n">session</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>

        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;After committing the session&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="p">)</span>

        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;After committing the session, show IDs&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1 ID:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2 ID:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3 ID:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>

        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;After committing the session, show names&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1 name:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2 name:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3 name:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>

        <span class="n">session</span><span class="o">.</span><span class="n">refresh</span><span class="p">(</span><span class="n">hero_1</span><span class="p">)</span>
        <span class="n">session</span><span class="o">.</span><span class="n">refresh</span><span class="p">(</span><span class="n">hero_2</span><span class="p">)</span>
        <span class="n">session</span><span class="o">.</span><span class="n">refresh</span><span class="p">(</span><span class="n">hero_3</span><span class="p">)</span>

        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;After refreshing the heroes&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="p">)</span>

    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;After the session closes&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">create_db_and_tables</span><span class="p">()</span>
    <span class="n">create_heroes</span><span class="p">()</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Optional</span>

<span class="kn">from</span> <span class="nn">sqldev</span> <span class="kn">import</span> <span class="n">Field</span><span class="p">,</span> <span class="n">Session</span><span class="p">,</span> <span class="n">SQLDev</span><span class="p">,</span> <span class="n">create_engine</span>


<span class="k">class</span> <span class="nc">Hero</span><span class="p">(</span><span class="n">SQLDev</span><span class="p">,</span> <span class="n">table</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="nb">id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">secret_name</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">age</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>


<span class="n">sqlite_file_name</span> <span class="o">=</span> <span class="s2">&quot;database.db&quot;</span>
<span class="n">sqlite_url</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;sqlite:///</span><span class="si">{</span><span class="n">sqlite_file_name</span><span class="si">}</span><span class="s2">&quot;</span>

<span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="n">sqlite_url</span><span class="p">,</span> <span class="n">echo</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">create_db_and_tables</span><span class="p">():</span>
    <span class="n">SQLDev</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">create_all</span><span class="p">(</span><span class="n">engine</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">create_heroes</span><span class="p">():</span>
    <span class="n">hero_1</span> <span class="o">=</span> <span class="n">Hero</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Deadpond&quot;</span><span class="p">,</span> <span class="n">secret_name</span><span class="o">=</span><span class="s2">&quot;Nx Pkg&quot;</span><span class="p">)</span>
    <span class="n">hero_2</span> <span class="o">=</span> <span class="n">Hero</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Spider-Boy&quot;</span><span class="p">,</span> <span class="n">secret_name</span><span class="o">=</span><span class="s2">&quot;Pedro Parqueador&quot;</span><span class="p">)</span>
    <span class="n">hero_3</span> <span class="o">=</span> <span class="n">Hero</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Rusty-Man&quot;</span><span class="p">,</span> <span class="n">secret_name</span><span class="o">=</span><span class="s2">&quot;Tommy Sharp&quot;</span><span class="p">,</span> <span class="n">age</span><span class="o">=</span><span class="mi">48</span><span class="p">)</span>

    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Before interacting with the database&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="p">)</span>

    <span class="k">with</span> <span class="n">Session</span><span class="p">(</span><span class="n">engine</span><span class="p">)</span> <span class="k">as</span> <span class="n">session</span><span class="p">:</span>
        <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">hero_1</span><span class="p">)</span>
        <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">hero_2</span><span class="p">)</span>
        <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">hero_3</span><span class="p">)</span>

        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;After adding to the session&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="p">)</span>

        <span class="n">session</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>

        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;After committing the session&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="p">)</span>

        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;After committing the session, show IDs&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1 ID:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2 ID:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3 ID:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>

        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;After committing the session, show names&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1 name:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2 name:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3 name:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>

        <span class="n">session</span><span class="o">.</span><span class="n">refresh</span><span class="p">(</span><span class="n">hero_1</span><span class="p">)</span>
        <span class="n">session</span><span class="o">.</span><span class="n">refresh</span><span class="p">(</span><span class="n">hero_2</span><span class="p">)</span>
        <span class="n">session</span><span class="o">.</span><span class="n">refresh</span><span class="p">(</span><span class="n">hero_3</span><span class="p">)</span>

        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;After refreshing the heroes&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="p">)</span>

    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;After the session closes&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">create_db_and_tables</span><span class="p">()</span>
    <span class="n">create_heroes</span><span class="p">()</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</code></pre></div>
</div>
</div>
</div>
</details>
<p>This will, again, output the <code>id</code>s of the objects as <code>None</code>:</p>
<div class="termy">

<div class="highlight"><pre><span></span><code><span class="gp">$ </span>python<span class="w"> </span>app.py

<span class="go">// Output above omitted 👆</span>

<span class="go">After adding to the session</span>
<span class="go">Hero 1: id=None name=&#39;Deadpond&#39; secret_name=&#39;Nx Pkg&#39; age=None</span>
<span class="go">Hero 2: id=None name=&#39;Spider-Boy&#39; secret_name=&#39;Pedro Parqueador&#39; age=None</span>
<span class="go">Hero 3: id=None name=&#39;Rusty-Man&#39; secret_name=&#39;Tommy Sharp&#39; age=48</span>
</code></pre></div>

</div>

<p>As we saw before, the <strong>session</strong> is smart and doesn't talk to the database every time we prepare something to be changed, only after we are ready and tell it to <code>commit</code> the changes it goes and sends all the SQL to the database to store the data.</p>
<h2 id="commit-the-changes-to-the-database">Commit the Changes to the Database<a class="headerlink" href="#commit-the-changes-to-the-database" title="Permanent link">&para;</a></h2>
<p>Then we can <code>commit</code> the changes in the session, and print again:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="9:2"><input checked="checked" id="__tabbed_9_1" name="__tabbed_9" type="radio" /><input id="__tabbed_9_2" name="__tabbed_9" type="radio" /><div class="tabbed-labels"><label for="__tabbed_9_1">Python 3.10+</label><label for="__tabbed_9_2">Python 3.7+</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="c1"># Code above omitted 👆</span>

    <span class="k">with</span> <span class="n">Session</span><span class="p">(</span><span class="n">engine</span><span class="p">)</span> <span class="k">as</span> <span class="n">session</span><span class="p">:</span>
        <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">hero_1</span><span class="p">)</span>
        <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">hero_2</span><span class="p">)</span>
        <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">hero_3</span><span class="p">)</span>

        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;After adding to the session&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="p">)</span>

<span class="hll">        <span class="n">session</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;After committing the session&quot;</span><span class="p">)</span>
<span class="hll">        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="p">)</span>
</span><span class="hll">        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="p">)</span>
</span><span class="hll">        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="p">)</span>
</span>
<span class="c1"># Code below omitted 👇</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="c1"># Code above omitted 👆</span>

    <span class="k">with</span> <span class="n">Session</span><span class="p">(</span><span class="n">engine</span><span class="p">)</span> <span class="k">as</span> <span class="n">session</span><span class="p">:</span>
        <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">hero_1</span><span class="p">)</span>
        <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">hero_2</span><span class="p">)</span>
        <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">hero_3</span><span class="p">)</span>

        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;After adding to the session&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="p">)</span>

<span class="hll">        <span class="n">session</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;After committing the session&quot;</span><span class="p">)</span>
<span class="hll">        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="p">)</span>
</span><span class="hll">        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="p">)</span>
</span><span class="hll">        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="p">)</span>
</span>
<span class="c1"># Code below omitted 👇</span>
</code></pre></div>
</div>
</div>
</div>
<details>
<summary>👀 Full file preview</summary>
<div class="tabbed-set tabbed-alternate" data-tabs="10:2"><input checked="checked" id="__tabbed_10_1" name="__tabbed_10" type="radio" /><input id="__tabbed_10_2" name="__tabbed_10" type="radio" /><div class="tabbed-labels"><label for="__tabbed_10_1">Python 3.10+</label><label for="__tabbed_10_2">Python 3.7+</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">sqldev</span> <span class="kn">import</span> <span class="n">Field</span><span class="p">,</span> <span class="n">Session</span><span class="p">,</span> <span class="n">SQLDev</span><span class="p">,</span> <span class="n">create_engine</span>


<span class="k">class</span> <span class="nc">Hero</span><span class="p">(</span><span class="n">SQLDev</span><span class="p">,</span> <span class="n">table</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="nb">id</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">secret_name</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">age</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>


<span class="n">sqlite_file_name</span> <span class="o">=</span> <span class="s2">&quot;database.db&quot;</span>
<span class="n">sqlite_url</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;sqlite:///</span><span class="si">{</span><span class="n">sqlite_file_name</span><span class="si">}</span><span class="s2">&quot;</span>

<span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="n">sqlite_url</span><span class="p">,</span> <span class="n">echo</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">create_db_and_tables</span><span class="p">():</span>
    <span class="n">SQLDev</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">create_all</span><span class="p">(</span><span class="n">engine</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">create_heroes</span><span class="p">():</span>
    <span class="n">hero_1</span> <span class="o">=</span> <span class="n">Hero</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Deadpond&quot;</span><span class="p">,</span> <span class="n">secret_name</span><span class="o">=</span><span class="s2">&quot;Nx Pkg&quot;</span><span class="p">)</span>
    <span class="n">hero_2</span> <span class="o">=</span> <span class="n">Hero</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Spider-Boy&quot;</span><span class="p">,</span> <span class="n">secret_name</span><span class="o">=</span><span class="s2">&quot;Pedro Parqueador&quot;</span><span class="p">)</span>
    <span class="n">hero_3</span> <span class="o">=</span> <span class="n">Hero</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Rusty-Man&quot;</span><span class="p">,</span> <span class="n">secret_name</span><span class="o">=</span><span class="s2">&quot;Tommy Sharp&quot;</span><span class="p">,</span> <span class="n">age</span><span class="o">=</span><span class="mi">48</span><span class="p">)</span>

    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Before interacting with the database&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="p">)</span>

    <span class="k">with</span> <span class="n">Session</span><span class="p">(</span><span class="n">engine</span><span class="p">)</span> <span class="k">as</span> <span class="n">session</span><span class="p">:</span>
        <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">hero_1</span><span class="p">)</span>
        <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">hero_2</span><span class="p">)</span>
        <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">hero_3</span><span class="p">)</span>

        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;After adding to the session&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="p">)</span>

        <span class="n">session</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>

        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;After committing the session&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="p">)</span>

        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;After committing the session, show IDs&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1 ID:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2 ID:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3 ID:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>

        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;After committing the session, show names&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1 name:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2 name:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3 name:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>

        <span class="n">session</span><span class="o">.</span><span class="n">refresh</span><span class="p">(</span><span class="n">hero_1</span><span class="p">)</span>
        <span class="n">session</span><span class="o">.</span><span class="n">refresh</span><span class="p">(</span><span class="n">hero_2</span><span class="p">)</span>
        <span class="n">session</span><span class="o">.</span><span class="n">refresh</span><span class="p">(</span><span class="n">hero_3</span><span class="p">)</span>

        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;After refreshing the heroes&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="p">)</span>

    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;After the session closes&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">create_db_and_tables</span><span class="p">()</span>
    <span class="n">create_heroes</span><span class="p">()</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Optional</span>

<span class="kn">from</span> <span class="nn">sqldev</span> <span class="kn">import</span> <span class="n">Field</span><span class="p">,</span> <span class="n">Session</span><span class="p">,</span> <span class="n">SQLDev</span><span class="p">,</span> <span class="n">create_engine</span>


<span class="k">class</span> <span class="nc">Hero</span><span class="p">(</span><span class="n">SQLDev</span><span class="p">,</span> <span class="n">table</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="nb">id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">secret_name</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">age</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>


<span class="n">sqlite_file_name</span> <span class="o">=</span> <span class="s2">&quot;database.db&quot;</span>
<span class="n">sqlite_url</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;sqlite:///</span><span class="si">{</span><span class="n">sqlite_file_name</span><span class="si">}</span><span class="s2">&quot;</span>

<span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="n">sqlite_url</span><span class="p">,</span> <span class="n">echo</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">create_db_and_tables</span><span class="p">():</span>
    <span class="n">SQLDev</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">create_all</span><span class="p">(</span><span class="n">engine</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">create_heroes</span><span class="p">():</span>
    <span class="n">hero_1</span> <span class="o">=</span> <span class="n">Hero</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Deadpond&quot;</span><span class="p">,</span> <span class="n">secret_name</span><span class="o">=</span><span class="s2">&quot;Nx Pkg&quot;</span><span class="p">)</span>
    <span class="n">hero_2</span> <span class="o">=</span> <span class="n">Hero</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Spider-Boy&quot;</span><span class="p">,</span> <span class="n">secret_name</span><span class="o">=</span><span class="s2">&quot;Pedro Parqueador&quot;</span><span class="p">)</span>
    <span class="n">hero_3</span> <span class="o">=</span> <span class="n">Hero</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Rusty-Man&quot;</span><span class="p">,</span> <span class="n">secret_name</span><span class="o">=</span><span class="s2">&quot;Tommy Sharp&quot;</span><span class="p">,</span> <span class="n">age</span><span class="o">=</span><span class="mi">48</span><span class="p">)</span>

    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Before interacting with the database&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="p">)</span>

    <span class="k">with</span> <span class="n">Session</span><span class="p">(</span><span class="n">engine</span><span class="p">)</span> <span class="k">as</span> <span class="n">session</span><span class="p">:</span>
        <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">hero_1</span><span class="p">)</span>
        <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">hero_2</span><span class="p">)</span>
        <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">hero_3</span><span class="p">)</span>

        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;After adding to the session&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="p">)</span>

        <span class="n">session</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>

        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;After committing the session&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="p">)</span>

        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;After committing the session, show IDs&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1 ID:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2 ID:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3 ID:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>

        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;After committing the session, show names&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1 name:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2 name:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3 name:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>

        <span class="n">session</span><span class="o">.</span><span class="n">refresh</span><span class="p">(</span><span class="n">hero_1</span><span class="p">)</span>
        <span class="n">session</span><span class="o">.</span><span class="n">refresh</span><span class="p">(</span><span class="n">hero_2</span><span class="p">)</span>
        <span class="n">session</span><span class="o">.</span><span class="n">refresh</span><span class="p">(</span><span class="n">hero_3</span><span class="p">)</span>

        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;After refreshing the heroes&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="p">)</span>

    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;After the session closes&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">create_db_and_tables</span><span class="p">()</span>
    <span class="n">create_heroes</span><span class="p">()</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</code></pre></div>
</div>
</div>
</div>
</details>
<p>And now, something unexpected happens, look at the output, it seems as if the <code>Hero</code> instance objects had no data at all:</p>
<div class="termy">

<div class="highlight"><pre><span></span><code><span class="gp">$ </span>python<span class="w"> </span>app.py

<span class="go">// Output above omitted 👆</span>

<span class="go">// Here the engine talks to the database, the SQL part</span>
<span class="go">INFO Engine BEGIN (implicit)</span>
<span class="go">INFO Engine INSERT INTO hero (name, secret_name, age) VALUES (?, ?, ?)</span>
<span class="go">INFO Engine [generated in 0.00018s] (&#39;Deadpond&#39;, &#39;Nx Pkg&#39;, None)</span>
<span class="go">INFO Engine INSERT INTO hero (name, secret_name, age) VALUES (?, ?, ?)</span>
<span class="go">INFO Engine [cached since 0.0008968s ago] (&#39;Spider-Boy&#39;, &#39;Pedro Parqueador&#39;, None)</span>
<span class="go">INFO Engine INSERT INTO hero (name, secret_name, age) VALUES (?, ?, ?)</span>
<span class="go">INFO Engine [cached since 0.001143s ago] (&#39;Rusty-Man&#39;, &#39;Tommy Sharp&#39;, 48)</span>
<span class="go">INFO Engine COMMIT</span>

<span class="go">// And now our prints</span>
<span class="go">After committing the session</span>
<span class="go">Hero 1:</span>
<span class="go">Hero 2:</span>
<span class="go">Hero 3:</span>

<span class="go">// What is happening here? 😱</span>
</code></pre></div>

</div>

<p>What happens is that SQLDev (actually SQLAlchemy) is internally marking those objects as "expired", they <strong>don't have the latest version of their data</strong>. This is because we could have some fields updated in the database, for example, imagine a field <code>updated_at: datetime</code> that was automatically updated when we saved changes.</p>
<p>The same way, other values could have changed, so the option the <strong>session</strong> has to be sure and safe is to just internally mark the objects as expired.</p>
<p>And then, next time we access each attribute, for example with:</p>
<div class="highlight"><pre><span></span><code><span class="n">current_hero_name</span> <span class="o">=</span> <span class="n">hero_1</span><span class="o">.</span><span class="n">name</span>
</code></pre></div>
<p>...SQLDev (actually SQLAlchemy) will make sure to contact the database and <strong>get the most recent version of the data</strong>, updating that field <code>name</code> in our object and then making it available for the rest of the Python expression. In the example above, at that point, Python would be able to continue executing and use that <code>hero_1.name</code> value (just updated) to put it in the variable <code>current_hero_name</code>.</p>
<p>All this happens automatically and behind the scenes. ✨</p>
<p>And here's the funny and strange thing with our example:</p>
<div class="highlight"><pre><span></span><code><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="p">)</span>
</code></pre></div>
<p>We didn't access the object's attributes, like <code>hero.name</code>. We only accessed the entire object and printed it, so <strong>SQLAlchemy has no way of knowing</strong> that we want to access this object's data.</p>
<h2 id="print-a-single-field">Print a Single Field<a class="headerlink" href="#print-a-single-field" title="Permanent link">&para;</a></h2>
<p>To confirm and understand how this <strong>automatic expiration and refresh</strong> of data when accessing attributes work, we can print some individual fields (instance attributes):</p>
<div class="tabbed-set tabbed-alternate" data-tabs="11:2"><input checked="checked" id="__tabbed_11_1" name="__tabbed_11" type="radio" /><input id="__tabbed_11_2" name="__tabbed_11" type="radio" /><div class="tabbed-labels"><label for="__tabbed_11_1">Python 3.10+</label><label for="__tabbed_11_2">Python 3.7+</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="c1"># Code above omitted 👆</span>

    <span class="k">with</span> <span class="n">Session</span><span class="p">(</span><span class="n">engine</span><span class="p">)</span> <span class="k">as</span> <span class="n">session</span><span class="p">:</span>
        <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">hero_1</span><span class="p">)</span>
        <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">hero_2</span><span class="p">)</span>
        <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">hero_3</span><span class="p">)</span>

        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;After adding to the session&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="p">)</span>

        <span class="n">session</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>

        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;After committing the session&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="p">)</span>

        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;After committing the session, show IDs&quot;</span><span class="p">)</span>
<span class="hll">        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1 ID:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
</span><span class="hll">        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2 ID:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
</span><span class="hll">        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3 ID:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;After committing the session, show names&quot;</span><span class="p">)</span>
<span class="hll">        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1 name:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
</span><span class="hll">        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2 name:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
</span><span class="hll">        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3 name:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
</span>
<span class="c1"># Code below omitted 👇</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="c1"># Code above omitted 👆</span>

    <span class="k">with</span> <span class="n">Session</span><span class="p">(</span><span class="n">engine</span><span class="p">)</span> <span class="k">as</span> <span class="n">session</span><span class="p">:</span>
        <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">hero_1</span><span class="p">)</span>
        <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">hero_2</span><span class="p">)</span>
        <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">hero_3</span><span class="p">)</span>

        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;After adding to the session&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="p">)</span>

        <span class="n">session</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>

        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;After committing the session&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="p">)</span>

        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;After committing the session, show IDs&quot;</span><span class="p">)</span>
<span class="hll">        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1 ID:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
</span><span class="hll">        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2 ID:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
</span><span class="hll">        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3 ID:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;After committing the session, show names&quot;</span><span class="p">)</span>
<span class="hll">        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1 name:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
</span><span class="hll">        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2 name:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
</span><span class="hll">        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3 name:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
</span>
<span class="c1"># Code below omitted 👇</span>
</code></pre></div>
</div>
</div>
</div>
<details>
<summary>👀 Full file preview</summary>
<div class="tabbed-set tabbed-alternate" data-tabs="12:2"><input checked="checked" id="__tabbed_12_1" name="__tabbed_12" type="radio" /><input id="__tabbed_12_2" name="__tabbed_12" type="radio" /><div class="tabbed-labels"><label for="__tabbed_12_1">Python 3.10+</label><label for="__tabbed_12_2">Python 3.7+</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">sqldev</span> <span class="kn">import</span> <span class="n">Field</span><span class="p">,</span> <span class="n">Session</span><span class="p">,</span> <span class="n">SQLDev</span><span class="p">,</span> <span class="n">create_engine</span>


<span class="k">class</span> <span class="nc">Hero</span><span class="p">(</span><span class="n">SQLDev</span><span class="p">,</span> <span class="n">table</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="nb">id</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">secret_name</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">age</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>


<span class="n">sqlite_file_name</span> <span class="o">=</span> <span class="s2">&quot;database.db&quot;</span>
<span class="n">sqlite_url</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;sqlite:///</span><span class="si">{</span><span class="n">sqlite_file_name</span><span class="si">}</span><span class="s2">&quot;</span>

<span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="n">sqlite_url</span><span class="p">,</span> <span class="n">echo</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">create_db_and_tables</span><span class="p">():</span>
    <span class="n">SQLDev</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">create_all</span><span class="p">(</span><span class="n">engine</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">create_heroes</span><span class="p">():</span>
    <span class="n">hero_1</span> <span class="o">=</span> <span class="n">Hero</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Deadpond&quot;</span><span class="p">,</span> <span class="n">secret_name</span><span class="o">=</span><span class="s2">&quot;Nx Pkg&quot;</span><span class="p">)</span>
    <span class="n">hero_2</span> <span class="o">=</span> <span class="n">Hero</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Spider-Boy&quot;</span><span class="p">,</span> <span class="n">secret_name</span><span class="o">=</span><span class="s2">&quot;Pedro Parqueador&quot;</span><span class="p">)</span>
    <span class="n">hero_3</span> <span class="o">=</span> <span class="n">Hero</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Rusty-Man&quot;</span><span class="p">,</span> <span class="n">secret_name</span><span class="o">=</span><span class="s2">&quot;Tommy Sharp&quot;</span><span class="p">,</span> <span class="n">age</span><span class="o">=</span><span class="mi">48</span><span class="p">)</span>

    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Before interacting with the database&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="p">)</span>

    <span class="k">with</span> <span class="n">Session</span><span class="p">(</span><span class="n">engine</span><span class="p">)</span> <span class="k">as</span> <span class="n">session</span><span class="p">:</span>
        <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">hero_1</span><span class="p">)</span>
        <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">hero_2</span><span class="p">)</span>
        <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">hero_3</span><span class="p">)</span>

        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;After adding to the session&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="p">)</span>

        <span class="n">session</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>

        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;After committing the session&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="p">)</span>

        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;After committing the session, show IDs&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1 ID:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2 ID:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3 ID:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>

        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;After committing the session, show names&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1 name:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2 name:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3 name:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>

        <span class="n">session</span><span class="o">.</span><span class="n">refresh</span><span class="p">(</span><span class="n">hero_1</span><span class="p">)</span>
        <span class="n">session</span><span class="o">.</span><span class="n">refresh</span><span class="p">(</span><span class="n">hero_2</span><span class="p">)</span>
        <span class="n">session</span><span class="o">.</span><span class="n">refresh</span><span class="p">(</span><span class="n">hero_3</span><span class="p">)</span>

        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;After refreshing the heroes&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="p">)</span>

    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;After the session closes&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">create_db_and_tables</span><span class="p">()</span>
    <span class="n">create_heroes</span><span class="p">()</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Optional</span>

<span class="kn">from</span> <span class="nn">sqldev</span> <span class="kn">import</span> <span class="n">Field</span><span class="p">,</span> <span class="n">Session</span><span class="p">,</span> <span class="n">SQLDev</span><span class="p">,</span> <span class="n">create_engine</span>


<span class="k">class</span> <span class="nc">Hero</span><span class="p">(</span><span class="n">SQLDev</span><span class="p">,</span> <span class="n">table</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="nb">id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">secret_name</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">age</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>


<span class="n">sqlite_file_name</span> <span class="o">=</span> <span class="s2">&quot;database.db&quot;</span>
<span class="n">sqlite_url</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;sqlite:///</span><span class="si">{</span><span class="n">sqlite_file_name</span><span class="si">}</span><span class="s2">&quot;</span>

<span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="n">sqlite_url</span><span class="p">,</span> <span class="n">echo</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">create_db_and_tables</span><span class="p">():</span>
    <span class="n">SQLDev</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">create_all</span><span class="p">(</span><span class="n">engine</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">create_heroes</span><span class="p">():</span>
    <span class="n">hero_1</span> <span class="o">=</span> <span class="n">Hero</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Deadpond&quot;</span><span class="p">,</span> <span class="n">secret_name</span><span class="o">=</span><span class="s2">&quot;Nx Pkg&quot;</span><span class="p">)</span>
    <span class="n">hero_2</span> <span class="o">=</span> <span class="n">Hero</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Spider-Boy&quot;</span><span class="p">,</span> <span class="n">secret_name</span><span class="o">=</span><span class="s2">&quot;Pedro Parqueador&quot;</span><span class="p">)</span>
    <span class="n">hero_3</span> <span class="o">=</span> <span class="n">Hero</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Rusty-Man&quot;</span><span class="p">,</span> <span class="n">secret_name</span><span class="o">=</span><span class="s2">&quot;Tommy Sharp&quot;</span><span class="p">,</span> <span class="n">age</span><span class="o">=</span><span class="mi">48</span><span class="p">)</span>

    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Before interacting with the database&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="p">)</span>

    <span class="k">with</span> <span class="n">Session</span><span class="p">(</span><span class="n">engine</span><span class="p">)</span> <span class="k">as</span> <span class="n">session</span><span class="p">:</span>
        <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">hero_1</span><span class="p">)</span>
        <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">hero_2</span><span class="p">)</span>
        <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">hero_3</span><span class="p">)</span>

        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;After adding to the session&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="p">)</span>

        <span class="n">session</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>

        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;After committing the session&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="p">)</span>

        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;After committing the session, show IDs&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1 ID:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2 ID:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3 ID:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>

        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;After committing the session, show names&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1 name:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2 name:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3 name:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>

        <span class="n">session</span><span class="o">.</span><span class="n">refresh</span><span class="p">(</span><span class="n">hero_1</span><span class="p">)</span>
        <span class="n">session</span><span class="o">.</span><span class="n">refresh</span><span class="p">(</span><span class="n">hero_2</span><span class="p">)</span>
        <span class="n">session</span><span class="o">.</span><span class="n">refresh</span><span class="p">(</span><span class="n">hero_3</span><span class="p">)</span>

        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;After refreshing the heroes&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="p">)</span>

    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;After the session closes&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">create_db_and_tables</span><span class="p">()</span>
    <span class="n">create_heroes</span><span class="p">()</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</code></pre></div>
</div>
</div>
</div>
</details>
<p>Now we are actually accessing the attributes, because instead of printing the whole object <code>hero_1</code>:</p>
<div class="highlight"><pre><span></span><code><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="p">)</span>
</code></pre></div>
<p>...we are now printing the <code>id</code> attribute in <code>hero.id</code>:</p>
<div class="highlight"><pre><span></span><code><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1 ID:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
</code></pre></div>
<p>By accessing the attribute, that <strong>triggers</strong> a lot of work done by SQLDev (actually SQLAlchemy) underneath to <strong>refresh the data from the database</strong>, set it in the object's <code>id</code> attribute, and make it available for the Python expression (in this case just to print it).</p>
<p>Let's see how it works:</p>
<div class="termy">

<div class="highlight"><pre><span></span><code><span class="gp">$ </span>python<span class="w"> </span>app.py

<span class="go">// Output above omitted 👆</span>

<span class="go">// After committing, the objects are expired and have no values</span>
<span class="go">After committing the session</span>
<span class="go">Hero 1:</span>
<span class="go">Hero 2:</span>
<span class="go">Hero 3:</span>

<span class="go">// Now we will access an attribute like the ID, this is the first print</span>
<span class="go">After committing the session, show IDs</span>

<span class="go">// Notice that before printing the first ID, the Session makes the Engine go to the database to refresh the data 🤓</span>
<span class="go">INFO Engine BEGIN (implicit)</span>
<span class="go">INFO Engine SELECT hero.id AS hero_id, hero.name AS hero_name, hero.secret_name AS hero_secret_name, hero.age AS hero_age</span>
<span class="go">FROM hero</span>
<span class="go">WHERE hero.id = ?</span>
<span class="go">INFO Engine [generated in 0.00017s] (1,)</span>

<span class="go">// Here&#39;s our first print, now we have the database-generated ID</span>
<span class="go">Hero 1 ID: 1</span>

<span class="go">// Before the next print, refresh the data for the second object</span>
<span class="go">INFO Engine SELECT hero.id AS hero_id, hero.name AS hero_name, hero.secret_name AS hero_secret_name, hero.age AS hero_age</span>
<span class="go">FROM hero</span>
<span class="go">WHERE hero.id = ?</span>
<span class="go">INFO Engine [cached since 0.001245s ago] (2,)</span>

<span class="go">// Here&#39;s our print for the second hero with its auto-generated ID</span>
<span class="go">Hero 2 ID: 2</span>

<span class="go">// Before the third print, refresh its data</span>
<span class="go">INFO Engine SELECT hero.id AS hero_id, hero.name AS hero_name, hero.secret_name AS hero_secret_name, hero.age AS hero_age</span>
<span class="go">FROM hero</span>
<span class="go">WHERE hero.id = ?</span>
<span class="go">INFO Engine [cached since 0.002215s ago] (3,)</span>

<span class="go">// And here&#39;s our print for the third hero</span>
<span class="go">Hero 3 ID: 3</span>

<span class="go">// What if we print another attribute like the name?</span>
<span class="go">After committing the session, show names</span>
<span class="go">Hero 1 name: Deadpond</span>
<span class="go">Hero 2 name: Spider-Boy</span>
<span class="go">Hero 3 name: Rusty-Man</span>

<span class="go">// Because the Session already refreshed these objects with all their data and the session knows they are not expired, it doesn&#39;t have to go again to the database for the names 🤓</span>
</code></pre></div>

</div>

<h2 id="refresh-objects-explicitly">Refresh Objects Explicitly<a class="headerlink" href="#refresh-objects-explicitly" title="Permanent link">&para;</a></h2>
<p>You just learnt how the <strong>session</strong> refreshes the data automatically behind the scenes, as a side effect, when you access an attribute.</p>
<p>But what if you want to <strong>explicitly refresh</strong> the data?</p>
<p>You can do that too with <code>session.refresh(object)</code>:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="13:2"><input checked="checked" id="__tabbed_13_1" name="__tabbed_13" type="radio" /><input id="__tabbed_13_2" name="__tabbed_13" type="radio" /><div class="tabbed-labels"><label for="__tabbed_13_1">Python 3.10+</label><label for="__tabbed_13_2">Python 3.7+</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="c1"># Code above omitted 👆</span>

    <span class="k">with</span> <span class="n">Session</span><span class="p">(</span><span class="n">engine</span><span class="p">)</span> <span class="k">as</span> <span class="n">session</span><span class="p">:</span>
        <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">hero_1</span><span class="p">)</span>
        <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">hero_2</span><span class="p">)</span>
        <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">hero_3</span><span class="p">)</span>

        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;After adding to the session&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="p">)</span>

        <span class="n">session</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>

        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;After committing the session&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="p">)</span>

        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;After committing the session, show IDs&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1 ID:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2 ID:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3 ID:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>

        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;After committing the session, show names&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1 name:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2 name:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3 name:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>

<span class="hll">        <span class="n">session</span><span class="o">.</span><span class="n">refresh</span><span class="p">(</span><span class="n">hero_1</span><span class="p">)</span>
</span><span class="hll">        <span class="n">session</span><span class="o">.</span><span class="n">refresh</span><span class="p">(</span><span class="n">hero_2</span><span class="p">)</span>
</span><span class="hll">        <span class="n">session</span><span class="o">.</span><span class="n">refresh</span><span class="p">(</span><span class="n">hero_3</span><span class="p">)</span>
</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;After refreshing the heroes&quot;</span><span class="p">)</span>
<span class="hll">        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="p">)</span>
</span><span class="hll">        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="p">)</span>
</span><span class="hll">        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="p">)</span>
</span>
<span class="c1"># Code below omitted 👇</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="c1"># Code above omitted 👆</span>

    <span class="k">with</span> <span class="n">Session</span><span class="p">(</span><span class="n">engine</span><span class="p">)</span> <span class="k">as</span> <span class="n">session</span><span class="p">:</span>
        <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">hero_1</span><span class="p">)</span>
        <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">hero_2</span><span class="p">)</span>
        <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">hero_3</span><span class="p">)</span>

        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;After adding to the session&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="p">)</span>

        <span class="n">session</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>

        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;After committing the session&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="p">)</span>

        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;After committing the session, show IDs&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1 ID:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2 ID:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3 ID:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>

        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;After committing the session, show names&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1 name:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2 name:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3 name:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>

<span class="hll">        <span class="n">session</span><span class="o">.</span><span class="n">refresh</span><span class="p">(</span><span class="n">hero_1</span><span class="p">)</span>
</span><span class="hll">        <span class="n">session</span><span class="o">.</span><span class="n">refresh</span><span class="p">(</span><span class="n">hero_2</span><span class="p">)</span>
</span><span class="hll">        <span class="n">session</span><span class="o">.</span><span class="n">refresh</span><span class="p">(</span><span class="n">hero_3</span><span class="p">)</span>
</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;After refreshing the heroes&quot;</span><span class="p">)</span>
<span class="hll">        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="p">)</span>
</span><span class="hll">        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="p">)</span>
</span><span class="hll">        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="p">)</span>
</span>
<span class="c1"># Code below omitted 👇</span>
</code></pre></div>
</div>
</div>
</div>
<details>
<summary>👀 Full file preview</summary>
<div class="tabbed-set tabbed-alternate" data-tabs="14:2"><input checked="checked" id="__tabbed_14_1" name="__tabbed_14" type="radio" /><input id="__tabbed_14_2" name="__tabbed_14" type="radio" /><div class="tabbed-labels"><label for="__tabbed_14_1">Python 3.10+</label><label for="__tabbed_14_2">Python 3.7+</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">sqldev</span> <span class="kn">import</span> <span class="n">Field</span><span class="p">,</span> <span class="n">Session</span><span class="p">,</span> <span class="n">SQLDev</span><span class="p">,</span> <span class="n">create_engine</span>


<span class="k">class</span> <span class="nc">Hero</span><span class="p">(</span><span class="n">SQLDev</span><span class="p">,</span> <span class="n">table</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="nb">id</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">secret_name</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">age</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>


<span class="n">sqlite_file_name</span> <span class="o">=</span> <span class="s2">&quot;database.db&quot;</span>
<span class="n">sqlite_url</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;sqlite:///</span><span class="si">{</span><span class="n">sqlite_file_name</span><span class="si">}</span><span class="s2">&quot;</span>

<span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="n">sqlite_url</span><span class="p">,</span> <span class="n">echo</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">create_db_and_tables</span><span class="p">():</span>
    <span class="n">SQLDev</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">create_all</span><span class="p">(</span><span class="n">engine</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">create_heroes</span><span class="p">():</span>
    <span class="n">hero_1</span> <span class="o">=</span> <span class="n">Hero</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Deadpond&quot;</span><span class="p">,</span> <span class="n">secret_name</span><span class="o">=</span><span class="s2">&quot;Nx Pkg&quot;</span><span class="p">)</span>
    <span class="n">hero_2</span> <span class="o">=</span> <span class="n">Hero</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Spider-Boy&quot;</span><span class="p">,</span> <span class="n">secret_name</span><span class="o">=</span><span class="s2">&quot;Pedro Parqueador&quot;</span><span class="p">)</span>
    <span class="n">hero_3</span> <span class="o">=</span> <span class="n">Hero</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Rusty-Man&quot;</span><span class="p">,</span> <span class="n">secret_name</span><span class="o">=</span><span class="s2">&quot;Tommy Sharp&quot;</span><span class="p">,</span> <span class="n">age</span><span class="o">=</span><span class="mi">48</span><span class="p">)</span>

    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Before interacting with the database&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="p">)</span>

    <span class="k">with</span> <span class="n">Session</span><span class="p">(</span><span class="n">engine</span><span class="p">)</span> <span class="k">as</span> <span class="n">session</span><span class="p">:</span>
        <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">hero_1</span><span class="p">)</span>
        <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">hero_2</span><span class="p">)</span>
        <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">hero_3</span><span class="p">)</span>

        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;After adding to the session&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="p">)</span>

        <span class="n">session</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>

        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;After committing the session&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="p">)</span>

        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;After committing the session, show IDs&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1 ID:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2 ID:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3 ID:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>

        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;After committing the session, show names&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1 name:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2 name:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3 name:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>

        <span class="n">session</span><span class="o">.</span><span class="n">refresh</span><span class="p">(</span><span class="n">hero_1</span><span class="p">)</span>
        <span class="n">session</span><span class="o">.</span><span class="n">refresh</span><span class="p">(</span><span class="n">hero_2</span><span class="p">)</span>
        <span class="n">session</span><span class="o">.</span><span class="n">refresh</span><span class="p">(</span><span class="n">hero_3</span><span class="p">)</span>

        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;After refreshing the heroes&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="p">)</span>

    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;After the session closes&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">create_db_and_tables</span><span class="p">()</span>
    <span class="n">create_heroes</span><span class="p">()</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Optional</span>

<span class="kn">from</span> <span class="nn">sqldev</span> <span class="kn">import</span> <span class="n">Field</span><span class="p">,</span> <span class="n">Session</span><span class="p">,</span> <span class="n">SQLDev</span><span class="p">,</span> <span class="n">create_engine</span>


<span class="k">class</span> <span class="nc">Hero</span><span class="p">(</span><span class="n">SQLDev</span><span class="p">,</span> <span class="n">table</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="nb">id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">secret_name</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">age</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>


<span class="n">sqlite_file_name</span> <span class="o">=</span> <span class="s2">&quot;database.db&quot;</span>
<span class="n">sqlite_url</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;sqlite:///</span><span class="si">{</span><span class="n">sqlite_file_name</span><span class="si">}</span><span class="s2">&quot;</span>

<span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="n">sqlite_url</span><span class="p">,</span> <span class="n">echo</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">create_db_and_tables</span><span class="p">():</span>
    <span class="n">SQLDev</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">create_all</span><span class="p">(</span><span class="n">engine</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">create_heroes</span><span class="p">():</span>
    <span class="n">hero_1</span> <span class="o">=</span> <span class="n">Hero</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Deadpond&quot;</span><span class="p">,</span> <span class="n">secret_name</span><span class="o">=</span><span class="s2">&quot;Nx Pkg&quot;</span><span class="p">)</span>
    <span class="n">hero_2</span> <span class="o">=</span> <span class="n">Hero</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Spider-Boy&quot;</span><span class="p">,</span> <span class="n">secret_name</span><span class="o">=</span><span class="s2">&quot;Pedro Parqueador&quot;</span><span class="p">)</span>
    <span class="n">hero_3</span> <span class="o">=</span> <span class="n">Hero</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Rusty-Man&quot;</span><span class="p">,</span> <span class="n">secret_name</span><span class="o">=</span><span class="s2">&quot;Tommy Sharp&quot;</span><span class="p">,</span> <span class="n">age</span><span class="o">=</span><span class="mi">48</span><span class="p">)</span>

    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Before interacting with the database&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="p">)</span>

    <span class="k">with</span> <span class="n">Session</span><span class="p">(</span><span class="n">engine</span><span class="p">)</span> <span class="k">as</span> <span class="n">session</span><span class="p">:</span>
        <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">hero_1</span><span class="p">)</span>
        <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">hero_2</span><span class="p">)</span>
        <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">hero_3</span><span class="p">)</span>

        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;After adding to the session&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="p">)</span>

        <span class="n">session</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>

        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;After committing the session&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="p">)</span>

        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;After committing the session, show IDs&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1 ID:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2 ID:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3 ID:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>

        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;After committing the session, show names&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1 name:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2 name:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3 name:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>

        <span class="n">session</span><span class="o">.</span><span class="n">refresh</span><span class="p">(</span><span class="n">hero_1</span><span class="p">)</span>
        <span class="n">session</span><span class="o">.</span><span class="n">refresh</span><span class="p">(</span><span class="n">hero_2</span><span class="p">)</span>
        <span class="n">session</span><span class="o">.</span><span class="n">refresh</span><span class="p">(</span><span class="n">hero_3</span><span class="p">)</span>

        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;After refreshing the heroes&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="p">)</span>

    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;After the session closes&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">create_db_and_tables</span><span class="p">()</span>
    <span class="n">create_heroes</span><span class="p">()</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</code></pre></div>
</div>
</div>
</div>
</details>
<p>When Python executes this code:</p>
<div class="highlight"><pre><span></span><code><span class="n">session</span><span class="o">.</span><span class="n">refresh</span><span class="p">(</span><span class="n">hero_1</span><span class="p">)</span>
</code></pre></div>
<p>...the <strong>session</strong> goes and makes the <strong>engine</strong> communicate with the database to get the recent data for this object <code>hero_1</code>, and then the <strong>session</strong> puts the data in the <code>hero_1</code> object and marks it as "fresh" or "not expired".</p>
<p>Here's how the output would look like:</p>
<div class="termy">

<div class="highlight"><pre><span></span><code><span class="gp">$ </span>python<span class="w"> </span>app.py

<span class="go">// Output above omitted 👆</span>

<span class="go">// The first refresh</span>
<span class="go">INFO Engine SELECT hero.id, hero.name, hero.secret_name, hero.age</span>
<span class="go">FROM hero</span>
<span class="go">WHERE hero.id = ?</span>
<span class="go">INFO Engine [generated in 0.00024s] (1,)</span>

<span class="go">// The second refresh</span>
<span class="go">INFO Engine SELECT hero.id, hero.name, hero.secret_name, hero.age</span>
<span class="go">FROM hero</span>
<span class="go">WHERE hero.id = ?</span>
<span class="go">INFO Engine [cached since 0.001487s ago] (2,)</span>

<span class="go">// The third refresh</span>
<span class="go">INFO Engine SELECT hero.id, hero.name, hero.secret_name, hero.age</span>
<span class="go">FROM hero</span>
<span class="go">WHERE hero.id = ?</span>
<span class="go">INFO Engine [cached since 0.002377s ago] (3,)</span>

<span class="go">// Now print the data, as it&#39;s already refreshed there&#39;s no need for the Session to go and refresh it again</span>
<span class="go">After refreshing the heroes</span>
<span class="go">Hero 1: age=None id=1 name=&#39;Deadpond&#39; secret_name=&#39;Nx Pkg&#39;</span>
<span class="go">Hero 2: age=None id=2 name=&#39;Spider-Boy&#39; secret_name=&#39;Pedro Parqueador&#39;</span>
<span class="go">Hero 3: age=48 id=3 name=&#39;Rusty-Man&#39; secret_name=&#39;Tommy Sharp&#39;</span>
</code></pre></div>

</div>

<p>This could be useful, for example, if you are building a web API to create heroes. And once a hero is created with some data, you return it to the client.</p>
<p>You wouldn't want to return an object that looks empty because the automatic magic to refresh the data was not triggered.</p>
<p>In this case, after committing the object to the database with the <strong>session</strong>, you could refresh it, and then return it to the client. This would ensure that the object has its fresh data.</p>
<h2 id="print-data-after-closing-the-session">Print Data After Closing the Session<a class="headerlink" href="#print-data-after-closing-the-session" title="Permanent link">&para;</a></h2>
<p>Now, as a final experiment, we can also print data after the <strong>session</strong> is closed.</p>
<p>There are no surprises here, it still works:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="15:2"><input checked="checked" id="__tabbed_15_1" name="__tabbed_15" type="radio" /><input id="__tabbed_15_2" name="__tabbed_15" type="radio" /><div class="tabbed-labels"><label for="__tabbed_15_1">Python 3.10+</label><label for="__tabbed_15_2">Python 3.7+</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="c1"># Code above omitted 👆</span>

    <span class="k">with</span> <span class="n">Session</span><span class="p">(</span><span class="n">engine</span><span class="p">)</span> <span class="k">as</span> <span class="n">session</span><span class="p">:</span>
        <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">hero_1</span><span class="p">)</span>
        <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">hero_2</span><span class="p">)</span>
        <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">hero_3</span><span class="p">)</span>

        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;After adding to the session&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="p">)</span>

        <span class="n">session</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>

        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;After committing the session&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="p">)</span>

        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;After committing the session, show IDs&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1 ID:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2 ID:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3 ID:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>

        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;After committing the session, show names&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1 name:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2 name:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3 name:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>

        <span class="n">session</span><span class="o">.</span><span class="n">refresh</span><span class="p">(</span><span class="n">hero_1</span><span class="p">)</span>
        <span class="n">session</span><span class="o">.</span><span class="n">refresh</span><span class="p">(</span><span class="n">hero_2</span><span class="p">)</span>
        <span class="n">session</span><span class="o">.</span><span class="n">refresh</span><span class="p">(</span><span class="n">hero_3</span><span class="p">)</span>

        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;After refreshing the heroes&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="p">)</span>

    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;After the session closes&quot;</span><span class="p">)</span>
<span class="hll">    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="p">)</span>
</span><span class="hll">    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="p">)</span>
</span><span class="hll">    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="p">)</span>
</span>
<span class="c1"># Code below omitted 👇</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="c1"># Code above omitted 👆</span>

    <span class="k">with</span> <span class="n">Session</span><span class="p">(</span><span class="n">engine</span><span class="p">)</span> <span class="k">as</span> <span class="n">session</span><span class="p">:</span>
        <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">hero_1</span><span class="p">)</span>
        <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">hero_2</span><span class="p">)</span>
        <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">hero_3</span><span class="p">)</span>

        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;After adding to the session&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="p">)</span>

        <span class="n">session</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>

        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;After committing the session&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="p">)</span>

        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;After committing the session, show IDs&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1 ID:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2 ID:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3 ID:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>

        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;After committing the session, show names&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1 name:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2 name:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3 name:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>

        <span class="n">session</span><span class="o">.</span><span class="n">refresh</span><span class="p">(</span><span class="n">hero_1</span><span class="p">)</span>
        <span class="n">session</span><span class="o">.</span><span class="n">refresh</span><span class="p">(</span><span class="n">hero_2</span><span class="p">)</span>
        <span class="n">session</span><span class="o">.</span><span class="n">refresh</span><span class="p">(</span><span class="n">hero_3</span><span class="p">)</span>

        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;After refreshing the heroes&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="p">)</span>

    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;After the session closes&quot;</span><span class="p">)</span>
<span class="hll">    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="p">)</span>
</span><span class="hll">    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="p">)</span>
</span><span class="hll">    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="p">)</span>
</span>
<span class="c1"># Code below omitted 👇</span>
</code></pre></div>
</div>
</div>
</div>
<details>
<summary>👀 Full file preview</summary>
<div class="tabbed-set tabbed-alternate" data-tabs="16:2"><input checked="checked" id="__tabbed_16_1" name="__tabbed_16" type="radio" /><input id="__tabbed_16_2" name="__tabbed_16" type="radio" /><div class="tabbed-labels"><label for="__tabbed_16_1">Python 3.10+</label><label for="__tabbed_16_2">Python 3.7+</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">sqldev</span> <span class="kn">import</span> <span class="n">Field</span><span class="p">,</span> <span class="n">Session</span><span class="p">,</span> <span class="n">SQLDev</span><span class="p">,</span> <span class="n">create_engine</span>


<span class="k">class</span> <span class="nc">Hero</span><span class="p">(</span><span class="n">SQLDev</span><span class="p">,</span> <span class="n">table</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="nb">id</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">secret_name</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">age</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>


<span class="n">sqlite_file_name</span> <span class="o">=</span> <span class="s2">&quot;database.db&quot;</span>
<span class="n">sqlite_url</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;sqlite:///</span><span class="si">{</span><span class="n">sqlite_file_name</span><span class="si">}</span><span class="s2">&quot;</span>

<span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="n">sqlite_url</span><span class="p">,</span> <span class="n">echo</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">create_db_and_tables</span><span class="p">():</span>
    <span class="n">SQLDev</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">create_all</span><span class="p">(</span><span class="n">engine</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">create_heroes</span><span class="p">():</span>
    <span class="n">hero_1</span> <span class="o">=</span> <span class="n">Hero</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Deadpond&quot;</span><span class="p">,</span> <span class="n">secret_name</span><span class="o">=</span><span class="s2">&quot;Nx Pkg&quot;</span><span class="p">)</span>
    <span class="n">hero_2</span> <span class="o">=</span> <span class="n">Hero</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Spider-Boy&quot;</span><span class="p">,</span> <span class="n">secret_name</span><span class="o">=</span><span class="s2">&quot;Pedro Parqueador&quot;</span><span class="p">)</span>
    <span class="n">hero_3</span> <span class="o">=</span> <span class="n">Hero</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Rusty-Man&quot;</span><span class="p">,</span> <span class="n">secret_name</span><span class="o">=</span><span class="s2">&quot;Tommy Sharp&quot;</span><span class="p">,</span> <span class="n">age</span><span class="o">=</span><span class="mi">48</span><span class="p">)</span>

    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Before interacting with the database&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="p">)</span>

    <span class="k">with</span> <span class="n">Session</span><span class="p">(</span><span class="n">engine</span><span class="p">)</span> <span class="k">as</span> <span class="n">session</span><span class="p">:</span>
        <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">hero_1</span><span class="p">)</span>
        <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">hero_2</span><span class="p">)</span>
        <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">hero_3</span><span class="p">)</span>

        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;After adding to the session&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="p">)</span>

        <span class="n">session</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>

        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;After committing the session&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="p">)</span>

        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;After committing the session, show IDs&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1 ID:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2 ID:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3 ID:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>

        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;After committing the session, show names&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1 name:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2 name:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3 name:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>

        <span class="n">session</span><span class="o">.</span><span class="n">refresh</span><span class="p">(</span><span class="n">hero_1</span><span class="p">)</span>
        <span class="n">session</span><span class="o">.</span><span class="n">refresh</span><span class="p">(</span><span class="n">hero_2</span><span class="p">)</span>
        <span class="n">session</span><span class="o">.</span><span class="n">refresh</span><span class="p">(</span><span class="n">hero_3</span><span class="p">)</span>

        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;After refreshing the heroes&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="p">)</span>

    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;After the session closes&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">create_db_and_tables</span><span class="p">()</span>
    <span class="n">create_heroes</span><span class="p">()</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Optional</span>

<span class="kn">from</span> <span class="nn">sqldev</span> <span class="kn">import</span> <span class="n">Field</span><span class="p">,</span> <span class="n">Session</span><span class="p">,</span> <span class="n">SQLDev</span><span class="p">,</span> <span class="n">create_engine</span>


<span class="k">class</span> <span class="nc">Hero</span><span class="p">(</span><span class="n">SQLDev</span><span class="p">,</span> <span class="n">table</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="nb">id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">secret_name</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">age</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>


<span class="n">sqlite_file_name</span> <span class="o">=</span> <span class="s2">&quot;database.db&quot;</span>
<span class="n">sqlite_url</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;sqlite:///</span><span class="si">{</span><span class="n">sqlite_file_name</span><span class="si">}</span><span class="s2">&quot;</span>

<span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="n">sqlite_url</span><span class="p">,</span> <span class="n">echo</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">create_db_and_tables</span><span class="p">():</span>
    <span class="n">SQLDev</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">create_all</span><span class="p">(</span><span class="n">engine</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">create_heroes</span><span class="p">():</span>
    <span class="n">hero_1</span> <span class="o">=</span> <span class="n">Hero</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Deadpond&quot;</span><span class="p">,</span> <span class="n">secret_name</span><span class="o">=</span><span class="s2">&quot;Nx Pkg&quot;</span><span class="p">)</span>
    <span class="n">hero_2</span> <span class="o">=</span> <span class="n">Hero</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Spider-Boy&quot;</span><span class="p">,</span> <span class="n">secret_name</span><span class="o">=</span><span class="s2">&quot;Pedro Parqueador&quot;</span><span class="p">)</span>
    <span class="n">hero_3</span> <span class="o">=</span> <span class="n">Hero</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Rusty-Man&quot;</span><span class="p">,</span> <span class="n">secret_name</span><span class="o">=</span><span class="s2">&quot;Tommy Sharp&quot;</span><span class="p">,</span> <span class="n">age</span><span class="o">=</span><span class="mi">48</span><span class="p">)</span>

    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Before interacting with the database&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="p">)</span>

    <span class="k">with</span> <span class="n">Session</span><span class="p">(</span><span class="n">engine</span><span class="p">)</span> <span class="k">as</span> <span class="n">session</span><span class="p">:</span>
        <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">hero_1</span><span class="p">)</span>
        <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">hero_2</span><span class="p">)</span>
        <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">hero_3</span><span class="p">)</span>

        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;After adding to the session&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="p">)</span>

        <span class="n">session</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>

        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;After committing the session&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="p">)</span>

        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;After committing the session, show IDs&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1 ID:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2 ID:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3 ID:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>

        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;After committing the session, show names&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1 name:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2 name:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3 name:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>

        <span class="n">session</span><span class="o">.</span><span class="n">refresh</span><span class="p">(</span><span class="n">hero_1</span><span class="p">)</span>
        <span class="n">session</span><span class="o">.</span><span class="n">refresh</span><span class="p">(</span><span class="n">hero_2</span><span class="p">)</span>
        <span class="n">session</span><span class="o">.</span><span class="n">refresh</span><span class="p">(</span><span class="n">hero_3</span><span class="p">)</span>

        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;After refreshing the heroes&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="p">)</span>

    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;After the session closes&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">create_db_and_tables</span><span class="p">()</span>
    <span class="n">create_heroes</span><span class="p">()</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</code></pre></div>
</div>
</div>
</div>
</details>
<p>And the output shows again the same data:</p>
<div class="termy">

<div class="highlight"><pre><span></span><code><span class="gp">$ </span>python<span class="w"> </span>app.py

<span class="go">// Output above omitted 👆</span>

<span class="go">// By finishing the with block, the Session is closed, including a rollback of any pending transaction that could have been there and was not committed</span>
<span class="go">INFO Engine ROLLBACK</span>

<span class="go">// Then we print the data, it works normally</span>
<span class="go">After the session closes</span>
<span class="go">Hero 1: age=None id=1 name=&#39;Deadpond&#39; secret_name=&#39;Nx Pkg&#39;</span>
<span class="go">Hero 2: age=None id=2 name=&#39;Spider-Boy&#39; secret_name=&#39;Pedro Parqueador&#39;</span>
<span class="go">Hero 3: age=48 id=3 name=&#39;Rusty-Man&#39; secret_name=&#39;Tommy Sharp&#39;</span>
</code></pre></div>

</div>

<h2 id="review-all-the-code">Review All the Code<a class="headerlink" href="#review-all-the-code" title="Permanent link">&para;</a></h2>
<p>Now let's review all this code once again.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Each one of the numbered bubbles shows what each line will print in the output.</p>
<p>And as we created the <strong>engine</strong> with <code>echo=True</code>, we can see the SQL statements being executed at each step.</p>
</div>
<div class="tabbed-set tabbed-alternate" data-tabs="17:2"><input checked="checked" id="__tabbed_17_1" name="__tabbed_17" type="radio" /><input id="__tabbed_17_2" name="__tabbed_17" type="radio" /><div class="tabbed-labels"><label for="__tabbed_17_1">Python 3.10+</label><label for="__tabbed_17_2">Python 3.7+</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">sqldev</span> <span class="kn">import</span> <span class="n">Field</span><span class="p">,</span> <span class="n">Session</span><span class="p">,</span> <span class="n">SQLDev</span><span class="p">,</span> <span class="n">create_engine</span>


<span class="k">class</span> <span class="nc">Hero</span><span class="p">(</span><span class="n">SQLDev</span><span class="p">,</span> <span class="n">table</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="nb">id</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">secret_name</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">age</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>


<span class="n">sqlite_file_name</span> <span class="o">=</span> <span class="s2">&quot;database.db&quot;</span>
<span class="n">sqlite_url</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;sqlite:///</span><span class="si">{</span><span class="n">sqlite_file_name</span><span class="si">}</span><span class="s2">&quot;</span>

<span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="n">sqlite_url</span><span class="p">,</span> <span class="n">echo</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">create_db_and_tables</span><span class="p">():</span>
    <span class="n">SQLDev</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">create_all</span><span class="p">(</span><span class="n">engine</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">create_heroes</span><span class="p">():</span>
    <span class="n">hero_1</span> <span class="o">=</span> <span class="n">Hero</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Deadpond&quot;</span><span class="p">,</span> <span class="n">secret_name</span><span class="o">=</span><span class="s2">&quot;Nx Pkg&quot;</span><span class="p">)</span>  <span class="c1"># (1)!</span>
    <span class="n">hero_2</span> <span class="o">=</span> <span class="n">Hero</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Spider-Boy&quot;</span><span class="p">,</span> <span class="n">secret_name</span><span class="o">=</span><span class="s2">&quot;Pedro Parqueador&quot;</span><span class="p">)</span>  <span class="c1"># (2)!</span>
    <span class="n">hero_3</span> <span class="o">=</span> <span class="n">Hero</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Rusty-Man&quot;</span><span class="p">,</span> <span class="n">secret_name</span><span class="o">=</span><span class="s2">&quot;Tommy Sharp&quot;</span><span class="p">,</span> <span class="n">age</span><span class="o">=</span><span class="mi">48</span><span class="p">)</span>  <span class="c1"># (3)!</span>

    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Before interacting with the database&quot;</span><span class="p">)</span>  <span class="c1"># (4)!</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="p">)</span>  <span class="c1"># (5)!</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="p">)</span>  <span class="c1"># (6)!</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="p">)</span>  <span class="c1"># (7)!</span>

    <span class="k">with</span> <span class="n">Session</span><span class="p">(</span><span class="n">engine</span><span class="p">)</span> <span class="k">as</span> <span class="n">session</span><span class="p">:</span>  <span class="c1"># (8)!</span>
        <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">hero_1</span><span class="p">)</span>  <span class="c1"># (9)!</span>
        <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">hero_2</span><span class="p">)</span>  <span class="c1"># (10)!</span>
        <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">hero_3</span><span class="p">)</span>  <span class="c1"># (11)!</span>

        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;After adding to the session&quot;</span><span class="p">)</span>  <span class="c1"># (12)!</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="p">)</span>  <span class="c1"># (13)!</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="p">)</span>  <span class="c1"># (14)!</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="p">)</span>  <span class="c1"># (15)!</span>

        <span class="n">session</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>  <span class="c1"># (16)!</span>

        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;After committing the session&quot;</span><span class="p">)</span>  <span class="c1"># (17)!</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="p">)</span>  <span class="c1"># (18)!</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="p">)</span>  <span class="c1"># (19)!</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="p">)</span>  <span class="c1"># (20)!</span>

        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;After committing the session, show IDs&quot;</span><span class="p">)</span>  <span class="c1"># (21)!</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1 ID:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>  <span class="c1"># (22)!</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2 ID:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>  <span class="c1"># (23)!</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3 ID:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>  <span class="c1"># (24)!</span>

        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;After committing the session, show names&quot;</span><span class="p">)</span>  <span class="c1"># (25)!</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1 name:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>  <span class="c1"># (26)!</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2 name:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>  <span class="c1"># (27)!</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3 name:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>  <span class="c1"># (28)!</span>

        <span class="n">session</span><span class="o">.</span><span class="n">refresh</span><span class="p">(</span><span class="n">hero_1</span><span class="p">)</span>  <span class="c1"># (29)!</span>
        <span class="n">session</span><span class="o">.</span><span class="n">refresh</span><span class="p">(</span><span class="n">hero_2</span><span class="p">)</span>  <span class="c1"># (30)!</span>
        <span class="n">session</span><span class="o">.</span><span class="n">refresh</span><span class="p">(</span><span class="n">hero_3</span><span class="p">)</span>  <span class="c1"># (31)!</span>

        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;After refreshing the heroes&quot;</span><span class="p">)</span>  <span class="c1"># (32)!</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="p">)</span>  <span class="c1"># (33)!</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="p">)</span>  <span class="c1"># (34)!</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="p">)</span>  <span class="c1"># (35)!</span>
    <span class="c1"># (36)!</span>

    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;After the session closes&quot;</span><span class="p">)</span>  <span class="c1"># (37)!</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="p">)</span>  <span class="c1"># (38)!</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="p">)</span>  <span class="c1"># (39)!</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="p">)</span>  <span class="c1"># (40)!</span>


<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">create_db_and_tables</span><span class="p">()</span>
    <span class="n">create_heroes</span><span class="p">()</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</code></pre></div>
<ol>
<li>
<p>Create the <code>hero_1</code>.</p>
<p><strong>Doesn't generate any output</strong>.</p>
</li>
<li>
<p>Create the <code>hero_2</code>.</p>
<p><strong>Doesn't generate any output</strong>.</p>
</li>
<li>
<p>Create the <code>hero_3</code>.</p>
<p><strong>Doesn't generate any output</strong>.</p>
</li>
<li>
<p>Print the line <code>"Before interacting with the database"</code>.</p>
<p>Generates the output:</p>
<div class="highlight"><pre><span></span><code>Before interacting with the database
</code></pre></div>
</li>
<li>
<p>Print the <code>hero_1</code> before interacting with the database.</p>
<p>Generates the output:</p>
<div class="highlight"><pre><span></span><code>Hero 1: id=None name=&#39;Deadpond&#39; secret_name=&#39;Nx Pkg&#39; age=None
</code></pre></div>
</li>
<li>
<p>Print the <code>hero_2</code> before interacting with the database.</p>
<p>Generates the output:</p>
<div class="highlight"><pre><span></span><code>Hero 2: id=None name=&#39;Spider-Boy&#39; secret_name=&#39;Pedro Parqueador&#39; age=None
</code></pre></div>
</li>
<li>
<p>Print the <code>hero_3</code> before interacting with the database.</p>
<p>Generates the output:</p>
<div class="highlight"><pre><span></span><code>Hero 3: id=None name=&#39;Rusty-Man&#39; secret_name=&#39;Tommy Sharp&#39; age=48
</code></pre></div>
</li>
<li>
<p>Create the <code>Session</code> in a <code>with</code> block.</p>
<p><strong>Doesn't generate any output</strong>.</p>
</li>
<li>
<p>Add the <code>hero_1</code> to the session.</p>
<p>This still doesn't save it to the database.</p>
<p><strong>Doesn't generate any output</strong>.</p>
</li>
<li>
<p>Add the <code>hero_2</code> to the session.</p>
<p>This still doesn't save it to the database.</p>
<p><strong>Doesn't generate any output</strong>.</p>
</li>
<li>
<p>Add the <code>hero_3</code> to the session.</p>
<p>This still doesn't save it to the database.</p>
<p><strong>Doesn't generate any output</strong>.</p>
</li>
<li>
<p>Print the line <code>"After adding to the session"</code>.</p>
<p>Generates the output:</p>
<div class="highlight"><pre><span></span><code>After adding to the session
</code></pre></div>
</li>
<li>
<p>Print the <code>hero_1</code> after adding it to the session.</p>
<p>It still has the same data as there hasn't been any interaction with the database yet. Notice that the <code>id</code> is still <code>None</code>.</p>
<p>Generates the output:</p>
<div class="highlight"><pre><span></span><code>Hero 1: id=None name=&#39;Deadpond&#39; secret_name=&#39;Nx Pkg&#39; age=None
</code></pre></div>
</li>
<li>
<p>Print the <code>hero_2</code> after adding it to the session.</p>
<p>It still has the same data as there hasn't been any interaction with the database yet. Notice that the <code>id</code> is still <code>None</code>.</p>
<p>Generates the output:</p>
<div class="highlight"><pre><span></span><code>Hero 2: id=None name=&#39;Spider-Boy&#39; secret_name=&#39;Pedro Parqueador&#39; age=None
</code></pre></div>
</li>
<li>
<p>Print the <code>hero_3</code> after adding it to the session.</p>
<p>It still has the same data as there hasn't been any interaction with the database yet. Notice that the <code>id</code> is still <code>None</code>.</p>
<p>Generates the output:</p>
<div class="highlight"><pre><span></span><code>Hero 3: id=None name=&#39;Rusty-Man&#39; secret_name=&#39;Tommy Sharp&#39; age=48
</code></pre></div>
</li>
<li>
<p><code>commit</code> the <strong>session</strong>.</p>
<p>This will <strong>save</strong> all the data to the database. The <strong>session</strong> will use the <strong>engine</strong> to run a lot of SQL.</p>
<p>Generates the output:</p>
<div class="highlight"><pre><span></span><code>INFO Engine BEGIN (implicit)
INFO Engine INSERT INTO hero (name, secret_name, age) VALUES (?, ?, ?)
INFO Engine [generated in 0.00018s] (&#39;Deadpond&#39;, &#39;Nx Pkg&#39;, None)
INFO Engine INSERT INTO hero (name, secret_name, age) VALUES (?, ?, ?)
INFO Engine [cached since 0.0008968s ago] (&#39;Spider-Boy&#39;, &#39;Pedro Parqueador&#39;, None)
INFO Engine INSERT INTO hero (name, secret_name, age) VALUES (?, ?, ?)
INFO Engine [cached since 0.001143s ago] (&#39;Rusty-Man&#39;, &#39;Tommy Sharp&#39;, 48)
INFO Engine COMMIT
</code></pre></div>
</li>
<li>
<p>Print the line <code>"After committing the session"</code>.</p>
<p>Generates the output:</p>
<div class="highlight"><pre><span></span><code>After committing the session
</code></pre></div>
</li>
<li>
<p>Print the <code>hero_1</code> after committing the session.</p>
<p>The <code>hero_1</code> is now internally marked as expired, and until it is refreshed, it looks like if it didn't contain any data.</p>
<p>Generates the output:</p>
<div class="highlight"><pre><span></span><code>Hero 1:
</code></pre></div>
</li>
<li>
<p>Print the <code>hero_2</code> after committing the session.</p>
<p>The <code>hero_2</code> is now internally marked as expired, and until it is refreshed, it looks like if it didn't contain any data.</p>
<p>Generates the output:</p>
<div class="highlight"><pre><span></span><code>Hero 2:
</code></pre></div>
</li>
<li>
<p>Print the <code>hero_3</code> after committing the session.</p>
<p>The <code>hero_3</code> is now internally marked as expired, and until it is refreshed, it looks like if it didn't contain any data.</p>
<p>Generates the output:</p>
<div class="highlight"><pre><span></span><code>Hero 3:
</code></pre></div>
</li>
<li>
<p>Print the line <code>"After committing the session, show IDs"</code>.</p>
<p>Generates the output:</p>
<div class="highlight"><pre><span></span><code>After committing the session, show IDs
</code></pre></div>
</li>
<li>
<p>Print the <code>hero_1.id</code>. A lot happens here.</p>
<p>Because we are accessing the attribute <code>id</code> of <code>hero_1</code>, <strong>SQLDev</strong> (actually SQLAlchemy) can detect that we are trying to access data from the <code>hero_1</code>.</p>
<p>It then detects that <code>hero_1</code> is currently associated with a <strong>session</strong> (because we added it to the session and committed it), and it is marked as expired.</p>
<p>Then with the <strong>session</strong>, it uses the <strong>engine</strong> to execute all the SQL to fetch the data for this object from the database.</p>
<p>Next it updates the object with the new data and marks it internally as "fresh" or "not expired".</p>
<p>Finally, it makes the ID value available for the rest of the Python expression. In this case, the Python expression just prints the ID.</p>
<p>Generates the output:</p>
<div class="highlight"><pre><span></span><code>INFO Engine BEGIN (implicit)
INFO Engine SELECT hero.id AS hero_id, hero.name AS hero_name, hero.secret_name AS hero_secret_name, hero.age AS hero_age
FROM hero
WHERE hero.id = ?
INFO Engine [generated in 0.00017s] (1,)

Hero 1 ID: 1
</code></pre></div>
</li>
<li>
<p>Print the <code>hero_2.id</code>.</p>
<p>A lot happens here, all the same stuff that happened at point 22, but for this <code>hero_2</code> object.</p>
<p>Generates the output:</p>
<div class="highlight"><pre><span></span><code>INFO Engine SELECT hero.id AS hero_id, hero.name AS hero_name, hero.secret_name AS hero_secret_name, hero.age AS hero_age
FROM hero
WHERE hero.id = ?
INFO Engine [cached since 0.001245s ago] (2,)

Hero 2 ID: 2
</code></pre></div>
</li>
<li>
<p>Print the <code>hero_3.id</code>.</p>
<p>A lot happens here, all the same stuff that happened at point 22, but for this <code>hero_3</code> object.</p>
<p>Generates the output:</p>
<div class="highlight"><pre><span></span><code>INFO Engine SELECT hero.id AS hero_id, hero.name AS hero_name, hero.secret_name AS hero_secret_name, hero.age AS hero_age
FROM hero
WHERE hero.id = ?
INFO Engine [cached since 0.002215s ago] (3,)


Hero 3 ID: 3
</code></pre></div>
</li>
<li>
<p>Print the line <code>"After committing the session, show names"</code>.</p>
<p>Generates the output:</p>
<div class="highlight"><pre><span></span><code>After committing the session, show names
</code></pre></div>
</li>
<li>
<p>Print the <code>hero_1.name</code>.</p>
<p>Because <code>hero_1</code> is still fresh, no additional data is fetched, no additional SQL is executed, and the name is available.</p>
<p>Generates the output:</p>
<div class="highlight"><pre><span></span><code>Hero 1 name: Deadpond
</code></pre></div>
</li>
<li>
<p>Print the <code>hero_2.name</code>.</p>
<p>Because <code>hero_2</code> is still fresh, no additional data is fetched, no additional SQL is executed, and the name is available.</p>
<p>Generates the output:</p>
<div class="highlight"><pre><span></span><code>Hero 2 name: Spider-Boy
</code></pre></div>
</li>
<li>
<p>Print the <code>hero_3.name</code>.</p>
<p>Because <code>hero_3</code> is still fresh, no additional data is fetched, no additional SQL is executed, and the name is available.</p>
<p>Generates the output:</p>
<div class="highlight"><pre><span></span><code>Hero 3 name: Rusty-Man
</code></pre></div>
</li>
<li>
<p>Explicitly refresh the <code>hero_1</code> object.</p>
<p>The <strong>session</strong> will use the <strong>engine</strong> to execute the SQL necessary to fetch fresh data from the database for the <code>hero_1</code> object.</p>
<p>Generates the output:</p>
<div class="highlight"><pre><span></span><code>INFO Engine SELECT hero.id, hero.name, hero.secret_name, hero.age
FROM hero
WHERE hero.id = ?
INFO Engine [generated in 0.00024s] (1,)
</code></pre></div>
</li>
<li>
<p>Explicitly refresh the <code>hero_2</code> object.</p>
<p>The <strong>session</strong> will use the <strong>engine</strong> to execute the SQL necessary to fetch fresh data from the database for the <code>hero_2</code> object.</p>
<p>Generates the output:</p>
<div class="highlight"><pre><span></span><code>INFO Engine SELECT hero.id, hero.name, hero.secret_name, hero.age
FROM hero
WHERE hero.id = ?
INFO Engine [cached since 0.001487s ago] (2,)
</code></pre></div>
</li>
<li>
<p>Explicitly refresh the <code>hero_3</code> object.</p>
<p>The <strong>session</strong> will use the <strong>engine</strong> to execute the SQL necessary to fetch fresh data from the database for the <code>hero_3</code> object.</p>
<p>Generates the output:</p>
<div class="highlight"><pre><span></span><code>INFO Engine SELECT hero.id, hero.name, hero.secret_name, hero.age
FROM hero
WHERE hero.id = ?
INFO Engine [cached since 0.002377s ago] (3,)
</code></pre></div>
</li>
<li>
<p>Print the line <code>"After refreshing the heroes"</code>.</p>
<p>Generates the output:</p>
<div class="highlight"><pre><span></span><code>After refreshing the heroes
</code></pre></div>
</li>
<li>
<p>Print the <code>hero_1</code>.</p>
<p>!!! info
    Even if the <code>hero_1</code> wasn't fresh, this would <strong>not</strong> trigger a <code>refresh</code> making the <strong>session</strong> use the <strong>engine</strong> to fetch data from the database because it is not accessing an attribute.</p>
<p>Because the <code>hero_1</code> is fresh it has all it's data available.</p>
<p>Generates the output:</p>
<div class="highlight"><pre><span></span><code>Hero 1: age=None id=1 name=&#39;Deadpond&#39; secret_name=&#39;Nx Pkg&#39;
</code></pre></div>
</li>
<li>
<p>Print the <code>hero_2</code>.</p>
<p>!!! info
    Even if the <code>hero_2</code> wasn't fresh, this would <strong>not</strong> trigger a <code>refresh</code> making the <strong>session</strong> use the <strong>engine</strong> to fetch data from the database because it is not accessing an attribute.</p>
<p>Because the <code>hero_2</code> is fresh it has all it's data available.</p>
<p>Generates the output:</p>
<div class="highlight"><pre><span></span><code>Hero 2: age=None id=2 name=&#39;Spider-Boy&#39; secret_name=&#39;Pedro Parqueador&#39;
</code></pre></div>
</li>
<li>
<p>Print the <code>hero_3</code>.</p>
<p>!!! info
    Even if the <code>hero_3</code> wasn't fresh, this would <strong>not</strong> trigger a <code>refresh</code> making the <strong>session</strong> use the <strong>engine</strong> to fetch data from the database because it is not accessing an attribute.</p>
<p>Because the <code>hero_3</code> is fresh it has all it's data available.</p>
<p>Generates the output:</p>
<div class="highlight"><pre><span></span><code>Hero 3: age=48 id=3 name=&#39;Rusty-Man&#39; secret_name=&#39;Tommy Sharp&#39;
</code></pre></div>
</li>
<li>
<p>The <code>with</code> block ends here (there's no more indented code), so the <strong>session</strong> is closed, running all it's closing code.</p>
<p>This includes doing a <code>ROLLBACK</code> of any possible transaction that could have been started.</p>
<p>Generates the output:</p>
<div class="highlight"><pre><span></span><code>INFO Engine ROLLBACK
</code></pre></div>
</li>
<li>
<p>Print the line <code>"After the session closes"</code>.</p>
<p>Generates the output:</p>
<div class="highlight"><pre><span></span><code>After the session closes
</code></pre></div>
</li>
<li>
<p>Print the <code>hero_1</code> after closing the session.</p>
<p>Generates the output:</p>
<div class="highlight"><pre><span></span><code>Hero 1: age=None id=1 name=&#39;Deadpond&#39; secret_name=&#39;Nx Pkg&#39;
</code></pre></div>
</li>
<li>
<p>Print the <code>hero_2</code> after closing the session.</p>
<p>Generates the output:</p>
<div class="highlight"><pre><span></span><code>Hero 2: age=None id=2 name=&#39;Spider-Boy&#39; secret_name=&#39;Pedro Parqueador&#39;
</code></pre></div>
</li>
<li>
<p>Print the <code>hero_3</code> after closing the session.</p>
<p>Generates the output:</p>
<div class="highlight"><pre><span></span><code>Hero 3: age=48 id=3 name=&#39;Rusty-Man&#39; secret_name=&#39;Tommy Sharp&#39;
</code></pre></div>
</li>
</ol>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Optional</span>

<span class="kn">from</span> <span class="nn">sqldev</span> <span class="kn">import</span> <span class="n">Field</span><span class="p">,</span> <span class="n">Session</span><span class="p">,</span> <span class="n">SQLDev</span><span class="p">,</span> <span class="n">create_engine</span>


<span class="k">class</span> <span class="nc">Hero</span><span class="p">(</span><span class="n">SQLDev</span><span class="p">,</span> <span class="n">table</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="nb">id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">secret_name</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">age</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>


<span class="n">sqlite_file_name</span> <span class="o">=</span> <span class="s2">&quot;database.db&quot;</span>
<span class="n">sqlite_url</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;sqlite:///</span><span class="si">{</span><span class="n">sqlite_file_name</span><span class="si">}</span><span class="s2">&quot;</span>

<span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="n">sqlite_url</span><span class="p">,</span> <span class="n">echo</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">create_db_and_tables</span><span class="p">():</span>
    <span class="n">SQLDev</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">create_all</span><span class="p">(</span><span class="n">engine</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">create_heroes</span><span class="p">():</span>
    <span class="n">hero_1</span> <span class="o">=</span> <span class="n">Hero</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Deadpond&quot;</span><span class="p">,</span> <span class="n">secret_name</span><span class="o">=</span><span class="s2">&quot;Nx Pkg&quot;</span><span class="p">)</span>  <span class="c1"># (1)!</span>
    <span class="n">hero_2</span> <span class="o">=</span> <span class="n">Hero</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Spider-Boy&quot;</span><span class="p">,</span> <span class="n">secret_name</span><span class="o">=</span><span class="s2">&quot;Pedro Parqueador&quot;</span><span class="p">)</span>  <span class="c1"># (2)!</span>
    <span class="n">hero_3</span> <span class="o">=</span> <span class="n">Hero</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Rusty-Man&quot;</span><span class="p">,</span> <span class="n">secret_name</span><span class="o">=</span><span class="s2">&quot;Tommy Sharp&quot;</span><span class="p">,</span> <span class="n">age</span><span class="o">=</span><span class="mi">48</span><span class="p">)</span>  <span class="c1"># (3)!</span>

    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Before interacting with the database&quot;</span><span class="p">)</span>  <span class="c1"># (4)!</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="p">)</span>  <span class="c1"># (5)!</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="p">)</span>  <span class="c1"># (6)!</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="p">)</span>  <span class="c1"># (7)!</span>

    <span class="k">with</span> <span class="n">Session</span><span class="p">(</span><span class="n">engine</span><span class="p">)</span> <span class="k">as</span> <span class="n">session</span><span class="p">:</span>  <span class="c1"># (8)!</span>
        <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">hero_1</span><span class="p">)</span>  <span class="c1"># (9)!</span>
        <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">hero_2</span><span class="p">)</span>  <span class="c1"># (10)!</span>
        <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">hero_3</span><span class="p">)</span>  <span class="c1"># (11)!</span>

        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;After adding to the session&quot;</span><span class="p">)</span>  <span class="c1"># (12)!</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="p">)</span>  <span class="c1"># (13)!</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="p">)</span>  <span class="c1"># (14)!</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="p">)</span>  <span class="c1"># (15)!</span>

        <span class="n">session</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>  <span class="c1"># (16)!</span>

        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;After committing the session&quot;</span><span class="p">)</span>  <span class="c1"># (17)!</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="p">)</span>  <span class="c1"># (18)!</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="p">)</span>  <span class="c1"># (19)!</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="p">)</span>  <span class="c1"># (20)!</span>

        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;After committing the session, show IDs&quot;</span><span class="p">)</span>  <span class="c1"># (21)!</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1 ID:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>  <span class="c1"># (22)!</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2 ID:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>  <span class="c1"># (23)!</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3 ID:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>  <span class="c1"># (24)!</span>

        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;After committing the session, show names&quot;</span><span class="p">)</span>  <span class="c1"># (25)!</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1 name:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>  <span class="c1"># (26)!</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2 name:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>  <span class="c1"># (27)!</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3 name:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>  <span class="c1"># (28)!</span>

        <span class="n">session</span><span class="o">.</span><span class="n">refresh</span><span class="p">(</span><span class="n">hero_1</span><span class="p">)</span>  <span class="c1"># (29)!</span>
        <span class="n">session</span><span class="o">.</span><span class="n">refresh</span><span class="p">(</span><span class="n">hero_2</span><span class="p">)</span>  <span class="c1"># (30)!</span>
        <span class="n">session</span><span class="o">.</span><span class="n">refresh</span><span class="p">(</span><span class="n">hero_3</span><span class="p">)</span>  <span class="c1"># (31)!</span>

        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;After refreshing the heroes&quot;</span><span class="p">)</span>  <span class="c1"># (32)!</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="p">)</span>  <span class="c1"># (33)!</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="p">)</span>  <span class="c1"># (34)!</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="p">)</span>  <span class="c1"># (35)!</span>
    <span class="c1"># (36)!</span>

    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;After the session closes&quot;</span><span class="p">)</span>  <span class="c1"># (37)!</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 1:&quot;</span><span class="p">,</span> <span class="n">hero_1</span><span class="p">)</span>  <span class="c1"># (38)!</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 2:&quot;</span><span class="p">,</span> <span class="n">hero_2</span><span class="p">)</span>  <span class="c1"># (39)!</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hero 3:&quot;</span><span class="p">,</span> <span class="n">hero_3</span><span class="p">)</span>  <span class="c1"># (40)!</span>


<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">create_db_and_tables</span><span class="p">()</span>
    <span class="n">create_heroes</span><span class="p">()</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</code></pre></div>
<ol>
<li>
<p>Create the <code>hero_1</code>.</p>
<p><strong>Doesn't generate any output</strong>.</p>
</li>
<li>
<p>Create the <code>hero_2</code>.</p>
<p><strong>Doesn't generate any output</strong>.</p>
</li>
<li>
<p>Create the <code>hero_3</code>.</p>
<p><strong>Doesn't generate any output</strong>.</p>
</li>
<li>
<p>Print the line <code>"Before interacting with the database"</code>.</p>
<p>Generates the output:</p>
<div class="highlight"><pre><span></span><code>Before interacting with the database
</code></pre></div>
</li>
<li>
<p>Print the <code>hero_1</code> before interacting with the database.</p>
<p>Generates the output:</p>
<div class="highlight"><pre><span></span><code>Hero 1: id=None name=&#39;Deadpond&#39; secret_name=&#39;Nx Pkg&#39; age=None
</code></pre></div>
</li>
<li>
<p>Print the <code>hero_2</code> before interacting with the database.</p>
<p>Generates the output:</p>
<div class="highlight"><pre><span></span><code>Hero 2: id=None name=&#39;Spider-Boy&#39; secret_name=&#39;Pedro Parqueador&#39; age=None
</code></pre></div>
</li>
<li>
<p>Print the <code>hero_3</code> before interacting with the database.</p>
<p>Generates the output:</p>
<div class="highlight"><pre><span></span><code>Hero 3: id=None name=&#39;Rusty-Man&#39; secret_name=&#39;Tommy Sharp&#39; age=48
</code></pre></div>
</li>
<li>
<p>Create the <code>Session</code> in a <code>with</code> block.</p>
<p><strong>Doesn't generate any output</strong>.</p>
</li>
<li>
<p>Add the <code>hero_1</code> to the session.</p>
<p>This still doesn't save it to the database.</p>
<p><strong>Doesn't generate any output</strong>.</p>
</li>
<li>
<p>Add the <code>hero_2</code> to the session.</p>
<p>This still doesn't save it to the database.</p>
<p><strong>Doesn't generate any output</strong>.</p>
</li>
<li>
<p>Add the <code>hero_3</code> to the session.</p>
<p>This still doesn't save it to the database.</p>
<p><strong>Doesn't generate any output</strong>.</p>
</li>
<li>
<p>Print the line <code>"After adding to the session"</code>.</p>
<p>Generates the output:</p>
<div class="highlight"><pre><span></span><code>After adding to the session
</code></pre></div>
</li>
<li>
<p>Print the <code>hero_1</code> after adding it to the session.</p>
<p>It still has the same data as there hasn't been any interaction with the database yet. Notice that the <code>id</code> is still <code>None</code>.</p>
<p>Generates the output:</p>
<div class="highlight"><pre><span></span><code>Hero 1: id=None name=&#39;Deadpond&#39; secret_name=&#39;Nx Pkg&#39; age=None
</code></pre></div>
</li>
<li>
<p>Print the <code>hero_2</code> after adding it to the session.</p>
<p>It still has the same data as there hasn't been any interaction with the database yet. Notice that the <code>id</code> is still <code>None</code>.</p>
<p>Generates the output:</p>
<div class="highlight"><pre><span></span><code>Hero 2: id=None name=&#39;Spider-Boy&#39; secret_name=&#39;Pedro Parqueador&#39; age=None
</code></pre></div>
</li>
<li>
<p>Print the <code>hero_3</code> after adding it to the session.</p>
<p>It still has the same data as there hasn't been any interaction with the database yet. Notice that the <code>id</code> is still <code>None</code>.</p>
<p>Generates the output:</p>
<div class="highlight"><pre><span></span><code>Hero 3: id=None name=&#39;Rusty-Man&#39; secret_name=&#39;Tommy Sharp&#39; age=48
</code></pre></div>
</li>
<li>
<p><code>commit</code> the <strong>session</strong>.</p>
<p>This will <strong>save</strong> all the data to the database. The <strong>session</strong> will use the <strong>engine</strong> to run a lot of SQL.</p>
<p>Generates the output:</p>
<div class="highlight"><pre><span></span><code>INFO Engine BEGIN (implicit)
INFO Engine INSERT INTO hero (name, secret_name, age) VALUES (?, ?, ?)
INFO Engine [generated in 0.00018s] (&#39;Deadpond&#39;, &#39;Nx Pkg&#39;, None)
INFO Engine INSERT INTO hero (name, secret_name, age) VALUES (?, ?, ?)
INFO Engine [cached since 0.0008968s ago] (&#39;Spider-Boy&#39;, &#39;Pedro Parqueador&#39;, None)
INFO Engine INSERT INTO hero (name, secret_name, age) VALUES (?, ?, ?)
INFO Engine [cached since 0.001143s ago] (&#39;Rusty-Man&#39;, &#39;Tommy Sharp&#39;, 48)
INFO Engine COMMIT
</code></pre></div>
</li>
<li>
<p>Print the line <code>"After committing the session"</code>.</p>
<p>Generates the output:</p>
<div class="highlight"><pre><span></span><code>After committing the session
</code></pre></div>
</li>
<li>
<p>Print the <code>hero_1</code> after committing the session.</p>
<p>The <code>hero_1</code> is now internally marked as expired, and until it is refreshed, it looks like if it didn't contain any data.</p>
<p>Generates the output:</p>
<div class="highlight"><pre><span></span><code>Hero 1:
</code></pre></div>
</li>
<li>
<p>Print the <code>hero_2</code> after committing the session.</p>
<p>The <code>hero_2</code> is now internally marked as expired, and until it is refreshed, it looks like if it didn't contain any data.</p>
<p>Generates the output:</p>
<div class="highlight"><pre><span></span><code>Hero 2:
</code></pre></div>
</li>
<li>
<p>Print the <code>hero_3</code> after committing the session.</p>
<p>The <code>hero_3</code> is now internally marked as expired, and until it is refreshed, it looks like if it didn't contain any data.</p>
<p>Generates the output:</p>
<div class="highlight"><pre><span></span><code>Hero 3:
</code></pre></div>
</li>
<li>
<p>Print the line <code>"After committing the session, show IDs"</code>.</p>
<p>Generates the output:</p>
<div class="highlight"><pre><span></span><code>After committing the session, show IDs
</code></pre></div>
</li>
<li>
<p>Print the <code>hero_1.id</code>. A lot happens here.</p>
<p>Because we are accessing the attribute <code>id</code> of <code>hero_1</code>, <strong>SQLDev</strong> (actually SQLAlchemy) can detect that we are trying to access data from the <code>hero_1</code>.</p>
<p>It then detects that <code>hero_1</code> is currently associated with a <strong>session</strong> (because we added it to the session and committed it), and it is marked as expired.</p>
<p>Then with the <strong>session</strong>, it uses the <strong>engine</strong> to execute all the SQL to fetch the data for this object from the database.</p>
<p>Next it updates the object with the new data and marks it internally as "fresh" or "not expired".</p>
<p>Finally, it makes the ID value available for the rest of the Python expression. In this case, the Python expression just prints the ID.</p>
<p>Generates the output:</p>
<div class="highlight"><pre><span></span><code>INFO Engine BEGIN (implicit)
INFO Engine SELECT hero.id AS hero_id, hero.name AS hero_name, hero.secret_name AS hero_secret_name, hero.age AS hero_age
FROM hero
WHERE hero.id = ?
INFO Engine [generated in 0.00017s] (1,)

Hero 1 ID: 1
</code></pre></div>
</li>
<li>
<p>Print the <code>hero_2.id</code>.</p>
<p>A lot happens here, all the same stuff that happened at point 22, but for this <code>hero_2</code> object.</p>
<p>Generates the output:</p>
<div class="highlight"><pre><span></span><code>INFO Engine SELECT hero.id AS hero_id, hero.name AS hero_name, hero.secret_name AS hero_secret_name, hero.age AS hero_age
FROM hero
WHERE hero.id = ?
INFO Engine [cached since 0.001245s ago] (2,)

Hero 2 ID: 2
</code></pre></div>
</li>
<li>
<p>Print the <code>hero_3.id</code>.</p>
<p>A lot happens here, all the same stuff that happened at point 22, but for this <code>hero_3</code> object.</p>
<p>Generates the output:</p>
<div class="highlight"><pre><span></span><code>INFO Engine SELECT hero.id AS hero_id, hero.name AS hero_name, hero.secret_name AS hero_secret_name, hero.age AS hero_age
FROM hero
WHERE hero.id = ?
INFO Engine [cached since 0.002215s ago] (3,)


Hero 3 ID: 3
</code></pre></div>
</li>
<li>
<p>Print the line <code>"After committing the session, show names"</code>.</p>
<p>Generates the output:</p>
<div class="highlight"><pre><span></span><code>After committing the session, show names
</code></pre></div>
</li>
<li>
<p>Print the <code>hero_1.name</code>.</p>
<p>Because <code>hero_1</code> is still fresh, no additional data is fetched, no additional SQL is executed, and the name is available.</p>
<p>Generates the output:</p>
<div class="highlight"><pre><span></span><code>Hero 1 name: Deadpond
</code></pre></div>
</li>
<li>
<p>Print the <code>hero_2.name</code>.</p>
<p>Because <code>hero_2</code> is still fresh, no additional data is fetched, no additional SQL is executed, and the name is available.</p>
<p>Generates the output:</p>
<div class="highlight"><pre><span></span><code>Hero 2 name: Spider-Boy
</code></pre></div>
</li>
<li>
<p>Print the <code>hero_3.name</code>.</p>
<p>Because <code>hero_3</code> is still fresh, no additional data is fetched, no additional SQL is executed, and the name is available.</p>
<p>Generates the output:</p>
<div class="highlight"><pre><span></span><code>Hero 3 name: Rusty-Man
</code></pre></div>
</li>
<li>
<p>Explicitly refresh the <code>hero_1</code> object.</p>
<p>The <strong>session</strong> will use the <strong>engine</strong> to execute the SQL necessary to fetch fresh data from the database for the <code>hero_1</code> object.</p>
<p>Generates the output:</p>
<div class="highlight"><pre><span></span><code>INFO Engine SELECT hero.id, hero.name, hero.secret_name, hero.age
FROM hero
WHERE hero.id = ?
INFO Engine [generated in 0.00024s] (1,)
</code></pre></div>
</li>
<li>
<p>Explicitly refresh the <code>hero_2</code> object.</p>
<p>The <strong>session</strong> will use the <strong>engine</strong> to execute the SQL necessary to fetch fresh data from the database for the <code>hero_2</code> object.</p>
<p>Generates the output:</p>
<div class="highlight"><pre><span></span><code>INFO Engine SELECT hero.id, hero.name, hero.secret_name, hero.age
FROM hero
WHERE hero.id = ?
INFO Engine [cached since 0.001487s ago] (2,)
</code></pre></div>
</li>
<li>
<p>Explicitly refresh the <code>hero_3</code> object.</p>
<p>The <strong>session</strong> will use the <strong>engine</strong> to execute the SQL necessary to fetch fresh data from the database for the <code>hero_3</code> object.</p>
<p>Generates the output:</p>
<div class="highlight"><pre><span></span><code>INFO Engine SELECT hero.id, hero.name, hero.secret_name, hero.age
FROM hero
WHERE hero.id = ?
INFO Engine [cached since 0.002377s ago] (3,)
</code></pre></div>
</li>
<li>
<p>Print the line <code>"After refreshing the heroes"</code>.</p>
<p>Generates the output:</p>
<div class="highlight"><pre><span></span><code>After refreshing the heroes
</code></pre></div>
</li>
<li>
<p>Print the <code>hero_1</code>.</p>
<p>!!! info
    Even if the <code>hero_1</code> wasn't fresh, this would <strong>not</strong> trigger a <code>refresh</code> making the <strong>session</strong> use the <strong>engine</strong> to fetch data from the database because it is not accessing an attribute.</p>
<p>Because the <code>hero_1</code> is fresh it has all it's data available.</p>
<p>Generates the output:</p>
<div class="highlight"><pre><span></span><code>Hero 1: age=None id=1 name=&#39;Deadpond&#39; secret_name=&#39;Nx Pkg&#39;
</code></pre></div>
</li>
<li>
<p>Print the <code>hero_2</code>.</p>
<p>!!! info
    Even if the <code>hero_2</code> wasn't fresh, this would <strong>not</strong> trigger a <code>refresh</code> making the <strong>session</strong> use the <strong>engine</strong> to fetch data from the database because it is not accessing an attribute.</p>
<p>Because the <code>hero_2</code> is fresh it has all it's data available.</p>
<p>Generates the output:</p>
<div class="highlight"><pre><span></span><code>Hero 2: age=None id=2 name=&#39;Spider-Boy&#39; secret_name=&#39;Pedro Parqueador&#39;
</code></pre></div>
</li>
<li>
<p>Print the <code>hero_3</code>.</p>
<p>!!! info
    Even if the <code>hero_3</code> wasn't fresh, this would <strong>not</strong> trigger a <code>refresh</code> making the <strong>session</strong> use the <strong>engine</strong> to fetch data from the database because it is not accessing an attribute.</p>
<p>Because the <code>hero_3</code> is fresh it has all it's data available.</p>
<p>Generates the output:</p>
<div class="highlight"><pre><span></span><code>Hero 3: age=48 id=3 name=&#39;Rusty-Man&#39; secret_name=&#39;Tommy Sharp&#39;
</code></pre></div>
</li>
<li>
<p>The <code>with</code> block ends here (there's no more indented code), so the <strong>session</strong> is closed, running all it's closing code.</p>
<p>This includes doing a <code>ROLLBACK</code> of any possible transaction that could have been started.</p>
<p>Generates the output:</p>
<div class="highlight"><pre><span></span><code>INFO Engine ROLLBACK
</code></pre></div>
</li>
<li>
<p>Print the line <code>"After the session closes"</code>.</p>
<p>Generates the output:</p>
<div class="highlight"><pre><span></span><code>After the session closes
</code></pre></div>
</li>
<li>
<p>Print the <code>hero_1</code> after closing the session.</p>
<p>Generates the output:</p>
<div class="highlight"><pre><span></span><code>Hero 1: age=None id=1 name=&#39;Deadpond&#39; secret_name=&#39;Nx Pkg&#39;
</code></pre></div>
</li>
<li>
<p>Print the <code>hero_2</code> after closing the session.</p>
<p>Generates the output:</p>
<div class="highlight"><pre><span></span><code>Hero 2: age=None id=2 name=&#39;Spider-Boy&#39; secret_name=&#39;Pedro Parqueador&#39;
</code></pre></div>
</li>
<li>
<p>Print the <code>hero_3</code> after closing the session.</p>
<p>Generates the output:</p>
<div class="highlight"><pre><span></span><code>Hero 3: age=48 id=3 name=&#39;Rusty-Man&#39; secret_name=&#39;Tommy Sharp&#39;
</code></pre></div>
</li>
</ol>
</div>
</div>
</div>
<p>And here's all the output generated by running this program, all together:</p>
<div class="termy">

<div class="highlight"><pre><span></span><code><span class="gp">$ </span>python<span class="w"> </span>app.py

<span class="go">INFO Engine BEGIN (implicit)</span>
<span class="go">INFO Engine PRAGMA main.table_info(&quot;hero&quot;)</span>
<span class="go">INFO Engine [raw sql] ()</span>
<span class="go">INFO Engine PRAGMA temp.table_info(&quot;hero&quot;)</span>
<span class="go">INFO Engine [raw sql] ()</span>
<span class="go">INFO Engine</span>
<span class="go">CREATE TABLE hero (</span>
<span class="go">        id INTEGER,</span>
<span class="go">        name VARCHAR NOT NULL,</span>
<span class="go">        secret_name VARCHAR NOT NULL,</span>
<span class="go">        age INTEGER,</span>
<span class="go">        PRIMARY KEY (id)</span>
<span class="go">)</span>


<span class="go">INFO Engine [no key 0.00018s] ()</span>
<span class="go">INFO Engine COMMIT</span>
<span class="go">Before interacting with the database</span>
<span class="go">Hero 1: id=None name=&#39;Deadpond&#39; secret_name=&#39;Nx Pkg&#39; age=None</span>
<span class="go">Hero 2: id=None name=&#39;Spider-Boy&#39; secret_name=&#39;Pedro Parqueador&#39; age=None</span>
<span class="go">Hero 3: id=None name=&#39;Rusty-Man&#39; secret_name=&#39;Tommy Sharp&#39; age=48</span>
<span class="go">After adding to the session</span>
<span class="go">Hero 1: id=None name=&#39;Deadpond&#39; secret_name=&#39;Nx Pkg&#39; age=None</span>
<span class="go">Hero 2: id=None name=&#39;Spider-Boy&#39; secret_name=&#39;Pedro Parqueador&#39; age=None</span>
<span class="go">Hero 3: id=None name=&#39;Rusty-Man&#39; secret_name=&#39;Tommy Sharp&#39; age=48</span>
<span class="go">INFO Engine BEGIN (implicit)</span>
<span class="go">INFO Engine INSERT INTO hero (name, secret_name, age) VALUES (?, ?, ?)</span>
<span class="go">INFO Engine [generated in 0.00022s] (&#39;Deadpond&#39;, &#39;Nx Pkg&#39;, None)</span>
<span class="go">INFO Engine INSERT INTO hero (name, secret_name, age) VALUES (?, ?, ?)</span>
<span class="go">INFO Engine [cached since 0.001127s ago] (&#39;Spider-Boy&#39;, &#39;Pedro Parqueador&#39;, None)</span>
<span class="go">INFO Engine INSERT INTO hero (name, secret_name, age) VALUES (?, ?, ?)</span>
<span class="go">INFO Engine [cached since 0.001483s ago] (&#39;Rusty-Man&#39;, &#39;Tommy Sharp&#39;, 48)</span>
<span class="go">INFO Engine COMMIT</span>
<span class="go">After committing the session</span>
<span class="go">Hero 1:</span>
<span class="go">Hero 2:</span>
<span class="go">Hero 3:</span>
<span class="go">After committing the session, show IDs</span>
<span class="go">INFO Engine BEGIN (implicit)</span>
<span class="go">INFO Engine SELECT hero.id AS hero_id, hero.name AS hero_name, hero.secret_name AS hero_secret_name, hero.age AS hero_age</span>
<span class="go">FROM hero</span>
<span class="go">WHERE hero.id = ?</span>
<span class="go">INFO Engine [generated in 0.00029s] (1,)</span>
<span class="go">Hero 1 ID: 1</span>
<span class="go">INFO Engine SELECT hero.id AS hero_id, hero.name AS hero_name, hero.secret_name AS hero_secret_name, hero.age AS hero_age</span>
<span class="go">FROM hero</span>
<span class="go">WHERE hero.id = ?</span>
<span class="go">INFO Engine [cached since 0.002132s ago] (2,)</span>
<span class="go">Hero 2 ID: 2</span>
<span class="go">INFO Engine SELECT hero.id AS hero_id, hero.name AS hero_name, hero.secret_name AS hero_secret_name, hero.age AS hero_age</span>
<span class="go">FROM hero</span>
<span class="go">WHERE hero.id = ?</span>
<span class="go">INFO Engine [cached since 0.003367s ago] (3,)</span>
<span class="go">Hero 3 ID: 3</span>
<span class="go">After committing the session, show names</span>
<span class="go">Hero 1 name: Deadpond</span>
<span class="go">Hero 2 name: Spider-Boy</span>
<span class="go">Hero 3 name: Rusty-Man</span>
<span class="go">INFO Engine SELECT hero.id, hero.name, hero.secret_name, hero.age</span>
<span class="go">FROM hero</span>
<span class="go">WHERE hero.id = ?</span>
<span class="go">INFO Engine [generated in 0.00025s] (1,)</span>
<span class="go">INFO Engine SELECT hero.id, hero.name, hero.secret_name, hero.age</span>
<span class="go">FROM hero</span>
<span class="go">WHERE hero.id = ?</span>
<span class="go">INFO Engine [cached since 0.001583s ago] (2,)</span>
<span class="go">INFO Engine SELECT hero.id, hero.name, hero.secret_name, hero.age</span>
<span class="go">FROM hero</span>
<span class="go">WHERE hero.id = ?</span>
<span class="go">INFO Engine [cached since 0.002722s ago] (3,)</span>
<span class="go">After refreshing the heroes</span>
<span class="go">Hero 1: age=None id=1 name=&#39;Deadpond&#39; secret_name=&#39;Nx Pkg&#39;</span>
<span class="go">Hero 2: age=None id=2 name=&#39;Spider-Boy&#39; secret_name=&#39;Pedro Parqueador&#39;</span>
<span class="go">Hero 3: age=48 id=3 name=&#39;Rusty-Man&#39; secret_name=&#39;Tommy Sharp&#39;</span>
<span class="go">INFO Engine ROLLBACK</span>
<span class="go">After the session closes</span>
<span class="go">Hero 1: age=None id=1 name=&#39;Deadpond&#39; secret_name=&#39;Nx Pkg&#39;</span>
<span class="go">Hero 2: age=None id=2 name=&#39;Spider-Boy&#39; secret_name=&#39;Pedro Parqueador&#39;</span>
<span class="go">Hero 3: age=48 id=3 name=&#39;Rusty-Man&#39; secret_name=&#39;Tommy Sharp&#39;</span>
</code></pre></div>

</div>

<h2 id="recap">Recap<a class="headerlink" href="#recap" title="Permanent link">&para;</a></h2>
<p>You read all that! That was a lot! Have some cake, you earned it. 🍰</p>
<p>We discussed how the <strong>session</strong> uses the <strong>engine</strong> to send SQL to the database, to create data and to fetch data too. How it keeps track of "<strong>expired</strong>" and "<strong>fresh</strong>" data. At which moments it <strong>fetches data automatically</strong> (when accessing instance attributes) and how that data is synchronized between objects in memory and the database via the <strong>session</strong>.</p>
<p>If you understood all that, now you know a lot about <strong>SQLDev</strong>, SQLAlchemy, and how the interactions from Python with databases work in general.</p>
<p>If you didn't get all that, it's fine, you can always come back later to <abbr title="See what I did there? 😜"><code>refresh</code></abbr> the concepts.</p>
<p>I think this might be one of the main types of bugs that cause problems and makes you scratch your head. So, good job studying it! 💪</p>









  




                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var tab,labels=set.querySelector(".tabbed-labels");for(tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/khulnasoft/sqldev" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 480 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1zM480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2zm-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3zm-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://twitter.com/khulnasoft" target="_blank" rel="noopener" title="twitter.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://www.linkedin.com/in/khulnasoft" target="_blank" rel="noopener" title="www.linkedin.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://dev.to/khulnasoft" target="_blank" rel="noopener" title="dev.to" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M120.12 208.29c-3.88-2.9-7.77-4.35-11.65-4.35H91.03v104.47h17.45c3.88 0 7.77-1.45 11.65-4.35 3.88-2.9 5.82-7.25 5.82-13.06v-69.65c-.01-5.8-1.96-10.16-5.83-13.06zM404.1 32H43.9C19.7 32 .06 51.59 0 75.8v360.4C.06 460.41 19.7 480 43.9 480h360.2c24.21 0 43.84-19.59 43.9-43.8V75.8c-.06-24.21-19.7-43.8-43.9-43.8zM154.2 291.19c0 18.81-11.61 47.31-48.36 47.25h-46.4V172.98h47.38c35.44 0 47.36 28.46 47.37 47.28l.01 70.93zm100.68-88.66H201.6v38.42h32.57v29.57H201.6v38.41h53.29v29.57h-62.18c-11.16.29-20.44-8.53-20.72-19.69V193.7c-.27-11.15 8.56-20.41 19.71-20.69h63.19l-.01 29.52zm103.64 115.29c-13.2 30.75-36.85 24.63-47.44 0l-38.53-144.8h32.57l29.71 113.72 29.57-113.72h32.58l-38.46 144.8z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://medium.com/@khulnasoft" target="_blank" rel="noopener" title="medium.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M180.5 74.262C80.813 74.262 0 155.633 0 256s80.819 181.738 180.5 181.738S361 356.373 361 256 280.191 74.262 180.5 74.262Zm288.25 10.646c-49.845 0-90.245 76.619-90.245 171.095s40.406 171.1 90.251 171.1 90.251-76.619 90.251-171.1H559c0-94.503-40.4-171.095-90.248-171.095Zm139.506 17.821c-17.526 0-31.735 68.628-31.735 153.274s14.2 153.274 31.735 153.274S640 340.631 640 256c0-84.649-14.215-153.271-31.742-153.271Z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://khulnasoft.com" target="_blank" rel="noopener" title="khulnasoft.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M352 256c0 22.2-1.2 43.6-3.3 64H163.3c-2.2-20.4-3.3-41.8-3.3-64s1.2-43.6 3.3-64h185.4c2.2 20.4 3.3 41.8 3.3 64zm28.8-64h123.1c5.3 20.5 8.1 41.9 8.1 64s-2.8 43.5-8.1 64H380.8c2.1-20.6 3.2-42 3.2-64s-1.1-43.4-3.2-64zm112.6-32H376.7c-10-63.9-29.8-117.4-55.3-151.6 78.3 20.7 142 77.5 171.9 151.6zm-149.1 0H167.7c6.1-36.4 15.5-68.6 27-94.7 10.5-23.6 22.2-40.7 33.5-51.5C239.4 3.2 248.7 0 256 0s16.6 3.2 27.8 13.8c11.3 10.8 23 27.9 33.5 51.5 11.6 26 20.9 58.2 27 94.7zm-209 0H18.6c30-74.1 93.6-130.9 172-151.6-25.5 34.2-45.3 87.7-55.3 151.6zM8.1 192h123.1c-2.1 20.6-3.2 42-3.2 64s1.1 43.4 3.2 64H8.1C2.8 299.5 0 278.1 0 256s2.8-43.5 8.1-64zm186.6 254.6c-11.6-26-20.9-58.2-27-94.6h176.6c-6.1 36.4-15.5 68.6-27 94.6-10.5 23.6-22.2 40.7-33.5 51.5-11.2 10.7-20.5 13.9-27.8 13.9s-16.6-3.2-27.8-13.8c-11.3-10.8-23-27.9-33.5-51.5zM135.3 352c10 63.9 29.8 117.4 55.3 151.6-78.4-20.7-142-77.5-172-151.6h116.7zm358.1 0c-30 74.1-93.6 130.9-171.9 151.6 25.5-34.2 45.2-87.7 55.3-151.6h116.6z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["search.suggest", "search.highlight", "content.tabs.link", "navigation.indexes", "content.tooltips", "navigation.path", "content.code.annotate", "content.code.copy", "content.code.select"], "search": "../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.ad660dcc.min.js"></script>
      
        <script src="../../js/termynal.js"></script>
      
        <script src="../../js/custom.js"></script>
      
    
  </body>
</html>